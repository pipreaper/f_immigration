(function($){$.extend({tablesorter:new function(){function benchmark(s,d){log(s+","+((new Date).getTime()-d.getTime())+"ms")}function log(s){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(s):alert(s)}function buildParserCache(table,$headers){var parsersDebug,rows,i,p;if(table.config.debug&&(parsersDebug=""),rows=table.tBodies[0].rows,table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(i=0;i<l;i++)p=!1,$.metadata&&$($headers[i]).metadata()&&$($headers[i]).metadata().sorter?p=getParserById($($headers[i]).metadata().sorter):table.config.headers[i]&&table.config.headers[i].sorter&&(p=getParserById(table.config.headers[i].sorter)),p||(p=detectParserForColumn(table,cells[i])),table.config.debug&&(parsersDebug+="column:"+i+" parser:"+p.id+"\n"),list.push(p)}return table.config.debug&&log(parsersDebug),list}function detectParserForColumn(table,node){for(var l=parsers.length,i=1;i<l;i++)if(parsers[i].is($.trim(getElementText(table.config,node)),table,node))return parsers[i];return parsers[0]}function getParserById(name){for(var l=parsers.length,i=0;i<l;i++)if(parsers[i].id.toLowerCase()==name.toLowerCase())return parsers[i];return!1}function buildCache(table){var cacheTime,i,c,cols,j;table.config.debug&&(cacheTime=new Date);var totalRows=table.tBodies[0]&&table.tBodies[0].rows.length||0,totalCells=table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(i=0;i<totalRows;++i){if(c=$(table.tBodies[0].rows[i]),cols=[],c.hasClass(table.config.cssChildRow)){cache.row[cache.row.length-1]=cache.row[cache.row.length-1].add(c);continue}for(cache.row.push(c),j=0;j<totalCells;++j)cols.push(parsers[j].format(getElementText(table.config,c[0].cells[j]),table,c[0].cells[j]));cols.push(cache.normalized.length);cache.normalized.push(cols);cols=null}return table.config.debug&&benchmark("Building cache for "+totalRows+" rows:",cacheTime),cache}function getElementText(config,node){return node?config.textExtraction=="simple"?node.childNodes[0]&&node.childNodes[0].hasChildNodes()?node.childNodes[0].innerHTML:node.innerHTML:config.textExtraction=="twistie"?$(node).children().hasClass("plusminus")?$(node).get(0).lastChild.nodeValue:$(node).text():typeof config.textExtraction=="function"?config.textExtraction(node):$(node).text():""}function appendToTable(table,cache,suppressUserSortEndEvent){var appendTime,i,pos,o,l,j;table.config.debug&&(appendTime=new Date);var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=n[0].length-1,tableBody=$(table.tBodies[0]),rows=[];for(i=0;i<totalRows;i++)if(pos=n[i][checkCell],rows.push(r[pos]),!table.config.appender)for(o=r[pos],l=o.length,j=0;j<l;j++)tableBody[0].appendChild(o[j]);table.config.appender&&table.config.appender(table,rows);rows=null;table.config.debug&&benchmark("Rebuilt table:",appendTime);applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd")},0);suppressUserSortEndEvent||setTimeout(function(){$(table).trigger("userSortEnd")},0)}function buildHeaders(table){var time,meta,tableHeadersRows,i;for(table.config.debug&&(time=new Date),meta=$.metadata?!0:!1,tableHeadersRows=[],i=0;i<table.tHead.rows.length;i++)tableHeadersRows[i]=0;return $tableHeaders=$("thead th",table),$tableHeaders.each(function(index){if(this.count=0,this.column=index,this.order=formatSortingOrder(table.config.sortInitialOrder),(checkHeaderMetadata(this)||checkHeaderOptions(table,index))&&(this.sortDisabled=!0),!this.sortDisabled){var $th=$(this).addClass(table.config.cssHeader);table.config.onRenderHeader&&table.config.onRenderHeader.apply($th)}table.config.headerList[index]=this}),table.config.debug&&(benchmark("Built headers:",time),log($tableHeaders)),$tableHeaders}function checkCellColSpan(table,rows,row){for(var arr=[],r=table.tHead.rows,c=r[row].cells,cell,i=0;i<c.length;i++)cell=c[i],cell.colSpan>1?arr=arr.concat(checkCellColSpan(table,headerArr,row++)):(table.tHead.length==1||cell.rowSpan>1||!r[row+1])&&arr.push(cell);return arr}function checkHeaderMetadata(cell){return $.metadata&&$(cell).metadata().sorter===!1?!0:!1}function checkHeaderOptions(table,i){return table.config.headers[i]&&table.config.headers[i].sorter===!1?!0:!1}function applyWidget(table){for(var c=table.config.widgets,l=c.length,i=0;i<l;i++)getWidgetById(c[i]).format(table)}function getWidgetById(name){for(var l=widgets.length,i=0;i<l;i++)if(widgets[i].id.toLowerCase()==name.toLowerCase())return widgets[i]}function formatSortingOrder(v){return i=typeof v!="Number"?v.toLowerCase()=="desc"?1:0:v==1?v:0}function isValueInArray(v,a){for(var l=a.length,i=0;i<l;i++)if(a[i][0]==v)return!0;return!1}function setHeadersCss(table,$headers,list,css){var h,l,i;for($headers.removeClass(css[0]).removeClass(css[1]),h=[],$headers.each(function(offset){this.sortDisabled||(h[this.column]=$(this))}),l=list.length,i=0;i<l;i++)h[list[i][0]].addClass(css[list[i][1]])}function fixColumnWidth(table,$headers){var c=table.config,colgroup;c.widthFixed&&(colgroup=$("<colgroup>"),$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()))}),$(table).prepend(colgroup))}function updateHeaderSortCount(table,sortList){for(var c=table.config,l=sortList.length,s,o,i=0;i<l;i++)s=sortList[i],o=c.headerList[s[0]],o.count=s[1],o.count++}function multisort(table,sortList,cache){var sortTime,dynamicExp,l,orgOrderCol,i;for(table.config.debug&&(sortTime=new Date),dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s=getCachedSortType(table.config.parsers,c)=="text"?order==0?"sortText":"sortTextDesc":order==0?"sortNumeric":"sortNumericDesc",e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}for(orgOrderCol=cache.normalized[0].length-1,dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];",i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function sortText(a,b){return a<b?-1:a>b?1:0}function sortTextDesc(a,b){return b<a?-1:b>a?1:0}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"uk",decimal:".",onRenderHeader:null,debug:!1};this.benchmark=benchmark;this.construct=function(settings){return this.each(function(){var $this,$document,$headers,cache,config,shiftDown,sortOrder,sortCSS;this.tHead&&this.tBodies&&(shiftDown=0,this.config={},config=$.extend(this.config,$.tablesorter.defaults,settings),$this=$(this),$.data(this,"tablesorter",config),$headers=buildHeaders(this),this.config.parsers=buildParserCache(this,$headers),cache=buildCache(this),sortCSS=[config.cssDesc,config.cssAsc],fixColumnWidth(this),$headers.click(function(e){var totalRows,$cell,i,a,j,s,o;if($this.trigger("sortStart"),totalRows=$this[0].tBodies[0]&&$this[0].tBodies[0].rows.length||0,!this.sortDisabled&&totalRows>0){if($cell=$(this),i=this.column,$cell.hasClass(config.cssAsc)||$cell.hasClass(config.cssDesc)?this.order=this.count++%2:(this.count=0,this.order=this.count++%2),e[config.sortMultiSortKey])if(isValueInArray(i,config.sortList))for(j=0;j<config.sortList.length;j++)s=config.sortList[j],o=config.headerList[s[0]],s[0]==i&&(o.count=s[1],o.count++,s[1]=o.count%2);else config.sortList.push([i,this.order]);else{if(config.sortList=[],config.sortForce!=null)for(a=config.sortForce,j=0;j<a.length;j++)a[j][0]!=i&&config.sortList.push(a[j]);config.sortList.push([i,this.order])}return setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);$headers.find("span.srTextSorted, span.srTextReverseSorted").hide();$headers.find("span.srTextSortable").show();$cell.hasClass(config.cssAsc)?($cell.find("span.srTextSorted, span.srTextSortable").hide(),$cell.find("span.srTextReverseSorted").show()):$cell.hasClass(config.cssDesc)&&($cell.find("span.srTextReverseSorted, span.srTextSortable").hide(),$cell.find("span.srTextSorted").show());appendToTable($this[0],multisort($this[0],config.sortList,cache))},1),!1}}).mousedown(function(){if(config.cancelSelection)return this.onselectstart=function(){return!1},!1}),$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this)}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache),!0)}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(config.sortList=$(this).metadata().sortlist),config.sortList.length>0&&$this.trigger("sorton",[config.sortList]),applyWidget(this))})};this.addParser=function(parser){for(var l=parsers.length,a=!0,i=0;i<l;i++)parsers[i].id.toLowerCase()==parser.id.toLowerCase()&&(a=!1);a&&parsers.push(parser)};this.addWidget=function(widget){widgets.push(widget)};this.formatFloat=function(s){var i=parseFloat(s);return isNaN(i)?0:i};this.formatInt=function(s){var i=parseInt(s);return isNaN(i)?0:i};this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal,exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";return RegExp(exp).test($.trim(s))};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild)}empty.apply(table.tBodies[0])}else table.tBodies[0].innerHTML=""}}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return!0},format:function(s){return $.trim(s.toLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){for(var a=s.split("."),r="",l=a.length,item,i=0;i<l;i++)item=a[i],r+=item.length==2?"0"+item:item;return $.tablesorter.formatFloat(r)},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat(s!=""?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;return s=s.replace(/\-/g,"/"),c.dateFormat=="us"?s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):c.dateFormat=="uk"?s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy")&&(s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return!1},format:function(s,table,cell){var c=table.config,p=c.parserMetadataName?c.parserMetadataName:"sortValue";return $(cell).metadata()[p]},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){var time,$tr,row,odd;table.config.debug&&(time=new Date);row=-1;$("tr:visible",table.tBodies[0]).each(function(i){$tr=$(this);$tr.hasClass(table.config.cssChildRow)||row++;odd=row%2==0;$tr.removeClass(table.config.widgetZebra.css[odd?0:1]).addClass(table.config.widgetZebra.css[odd?1:0])});table.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",time)}})})(jQuery)