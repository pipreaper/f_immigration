/*!
 * jQuery Validation Plugin v1.14.0
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2015 JÃ¶rn Zaefferer
 * Released under the MIT license
 */
function testCSSProperties(props){e=document.createElement("div");eStyle=e.style;for(var i in props)if(eStyle[props[i]]!==undefined)return!0}function supportsCSSProperty(prop){var uc_prop=prop.charAt(0).toUpperCase()+prop.substr(1),props=[prop,"webkit"+uc_prop,"Moz"+uc_prop,"moz"+uc_prop,"o"+uc_prop,"ms"+uc_prop];return!!testCSSProperties(props)}function equaliseColHeights(){var leftCol=$("#user-content"),middleCol=$("#stage"),rightCol=$("#nw-content"),stageInner=$("#stageInner"),tallestColHeight;leftCol.css("height","auto");middleCol.css("height","auto");rightCol.css("height","auto");stageInner.css("height","auto");tallestColHeight=Math.max(leftCol.outerHeight(),middleCol.outerHeight(),rightCol.outerHeight());leftCol.height(tallestColHeight-40);middleCol.height(tallestColHeight);rightCol.height(tallestColHeight-50);stageInner.height(tallestColHeight-45)}function initialiseTableTwisties(settings){var outerTwistieTriggers,twistieTriggers,closeTwistie;settings=$.extend({twistieTrigger:"a.plusminus",outerTwistieTrigger:"a.plusminus-outer",hiddenTwistieRow:"tr.acAdditionalInfo, tr.acAdditionalInfo td",hiddenTwistieExtraRow:null,revealTriggerInner:'<b class="button"><span>-<\/span><span class="srText"><\/span><\/b><i><\/i>',hideTriggerInner:'<b class="button"><span>+<\/span><span class="srText"><\/span><\/b><i><\/i>',onlyOneTwistieOpen:!1},settings||{});$(settings.hiddenTwistieRow).hide();outerTwistieTriggers=$(settings.outerTwistieTrigger);twistieTriggers=$(settings.twistieTrigger);twistieTriggers[0]&&twistieTriggers.find("span.srText").text(twistieTriggers[0].title);outerTwistieTriggers.each(function(){var outerTwistie=$(this);outerTwistie.hasClass("expanded")||outerTwistie.closest("thead").next("tbody").hide().children("tr").hide().children("td").hide()}).click(function(e){var outerTwistieTrigger,nextTableBody,nextTableBodyRows,newTitle,srTextSpan;e.preventDefault();outerTwistieTrigger=$(this);outerTwistieTrigger.hasClass("expanded")?(outerTwistieTrigger.removeClass("expanded").html(settings.hideTriggerInner),nextTableBody=outerTwistieTrigger.closest("thead").next("tbody"),nextTableBodyRows=nextTableBody.children("tr"),nextTableBodyRows.children("td").hide(),nextTableBodyRows.hide(),nextTableBody.hide(),equaliseColHeights()):(outerTwistieTrigger.addClass("expanded").html(settings.revealTriggerInner),nextTableBody=outerTwistieTrigger.closest("thead").next("tbody"),nextTableBodyRows=nextTableBody.children("tr"),nextTableBody.show(),nextTableBodyRows.show(),nextTableBodyRows.children("td").show(),equaliseColHeights());outerTwistieTrigger[0].title&&outerTwistieTrigger[0].rel&&(newTitle=outerTwistieTrigger[0].title,outerTwistieTrigger[0].title=outerTwistieTrigger[0].rel,outerTwistieTrigger[0].rel=newTitle,srTextSpan=outerTwistieTrigger.find("span.srText"),srTextSpan&&srTextSpan.text(outerTwistieTrigger[0].title))});twistieTriggers.filter(".expanded").each(function(){var twistie=$(this),nextRevealRow=twistie.closest("tr").next(settings.hiddenTwistieRow);twistie.html(settings.revealTriggerInner);nextRevealRow.show();nextRevealRow.children("td").show()});closeTwistie=function(trigger){var triggerObj=$(trigger),nextInfoRow=triggerObj.closest("tr").next(settings.hiddenTwistieRow);triggerObj.removeClass("expanded").html(settings.hideTriggerInner);nextInfoRow.children("td").fadeOut(100,function(){nextInfoRow.fadeOut(100);equaliseColHeights()});settings.hiddenTwistieExtraRow&&triggerObj.closest("tr").next(settings.hiddenTwistieRow).next(settings.hiddenTwistieExtraRow).removeClass("expanded")};equaliseColHeights();twistieTriggers.click(function(e){var twistieTrigger=$(this),changeStateOnClick=!0,openTwisties,nextRevealInfoRow,newTitle,srTextSpan;!twistieTrigger.hasClass("incomplete-info")||twistieTrigger.hasClass("expanded")?(e.preventDefault(),e.returnValue=!1):($.bypassUnloadMsg=!0,changeStateOnClick=!1);twistieTrigger.hasClass("expanded")?closeTwistie(twistieTrigger):(settings.onlyOneTwistieOpen&&(openTwisties=twistieTrigger.closest("tbody").find("a.plusminus").filter(".expanded"),openTwisties.length&&openTwisties.each(function(){closeTwistie(this)})),changeStateOnClick&&(twistieTrigger.addClass("expanded").html(settings.revealTriggerInner),settings.hiddenTwistieExtraRow&&twistieTrigger.closest("tr").next(settings.hiddenTwistieRow).next(settings.hiddenTwistieExtraRow).addClass("expanded"),nextRevealInfoRow=twistieTrigger.closest("tr").next(settings.hiddenTwistieRow),nextRevealInfoRow.fadeIn(100),nextRevealInfoRow.children("td").fadeIn(300,function(){equaliseColHeights()})));twistieTrigger[0].title&&twistieTrigger[0].rel&&(newTitle=twistieTrigger[0].title,twistieTrigger[0].title=twistieTrigger[0].rel,twistieTrigger[0].rel=newTitle,srTextSpan=twistieTrigger.find("span.srText"),srTextSpan.text(twistieTrigger[0].title))})}function addDatepicker(e){var today=new Date,oneYrToday=new Date;oneYrToday.setFullYear(today.getFullYear()+1);$(".datepicker1").datepicker({changeMonth:!1,changeYear:!1,minDate:today,maxDate:oneYrToday,showOn:"button",buttonText:"Select Date",buttonImageOnly:!1,showButtonPanel:!0,showAnim:"slideDown",tableSummary:$("#datePickerTableSummary").val()});$(".datepicker2").datepicker({changeMonth:!0,changeYear:!0,yearRange:"1973:2073",showOn:"button",buttonText:"Select Date",buttonImageOnly:!1,showAnim:"slideDown",tableSummary:$("#datePickerTableSummary").val()});$(".datepicker3").datepicker({changeMonth:!1,changeYear:!1,showOn:"button",buttonText:"Select Date",buttonImageOnly:!1,numberOfMonths:2,showButtonPanel:!0,showAnim:"slideDown",stepMonths:2,tableSummary:$("#datePickerTableSummary").val()});$(".datepicker4").datepicker({changeMonth:!1,changeYear:!1,showOn:"button",buttonText:"Select Date",buttonImageOnly:!1,numberOfMonths:2,showButtonPanel:!0,showAnim:"slideDown",toFrom:!0,tableSummary:$("#datePickerTableSummary").val()})}function showFlotChartTooltip(x,y,contents){$('<div class="chart-tooltip">'+contents+"<\/div>").css({top:y+5,left:x+5,position:"absolute"}).appendTo("body").show()}function commonDisableBtn(obj,disabledClass){var btnClass=disabledClass?disabledClass:"btn-clk-disabled";obj.addClass(btnClass)}function commonEnableBtn(obj,disabledClass){var btnClass=disabledClass?disabledClass:"btn-clk-disabled";obj.unblock().removeClass(btnClass).addClass("btn-action")}function commonFilterLinksHandler(filterLinksContainer){filterLinksContainer.on("click","a",function(e){e.preventDefault();filterLinksContainer.find("span.current").each(function(){var currentSpan=$(this);currentSpan.replaceWith('<a href="#" title="'+currentSpan.attr("title")+'">'+currentSpan.html()+"<\/a>")});var currentLink=$(this);currentLink.replaceWith('<span class="current" title="'+currentLink.attr("title")+'">'+currentLink.html()+"<\/span>")})}function setupHelpFlyouts(defaultFlyout,parentContainerPath){function showFlyout(flyout){allHelpFlyouts.hide();flyout.css({top:flyout.parents(containerPath).outerHeight()/2-flyout.outerHeight()/2+"px"});flyout.find("b.pointer").css({top:flyout.height()/2-10+"px"});ctSetIeZindexes(flyout);flyout.show()}var allHelpFlyouts=$("#stage div.help-fly-out"),containerPath="div.sales-two-col-pod:first";parentContainerPath!=undefined&&(containerPath=parentContainerPath);allHelpFlyouts.each(function(){var helpFlyout=$("#"+this.id),associatedElements=$("input, a, select").filter('[aria-describedby="'+this.id+'"]');helpFlyout.append('<b class="pointer"><\/b>');associatedElements.focus(function(){showFlyout(helpFlyout)}).blur(function(){helpFlyout.hide()})});defaultFlyout&&showFlyout(defaultFlyout)}function applyComponentHighlighting(form){form.find("div.com-highlight :text, div.com-highlight :password, div.com-highlight select").focus(function(){$(this).closest("div.com-highlight").addClass("in-focus")}).blur(function(){$(this).closest("div.com-highlight").removeClass("in-focus")})}function ctSetIeZindexes(ctEl){$.browser.msie&&($(ctEl).parents().each(function(){var p=$(this),pos=p.css("position");(pos=="relative"||pos=="absolute"||pos=="fixed")&&$(this).css({zIndex:"499"});$("#stageInner").css({zIndex:"500"})}),parseFloat($.browser.version)<8&&$(window).resize())}function handleBackButton(){function retain(elem){for(var len=removeFilters.classes.length,self=$(elem),remove=!0;len--;)if(self.hasClass(removeFilters.classes[len])){remove=!1;break}if(remove)for(len=removeFilters.ids.length;len--;)if(elem.id===removeFilters.ids[len]){remove=!1;break}return remove}var removeFilters={ids:["cal-next","cal-prev","closeHelpLink","lbBtnCancel"],classes:["ui-datepicker-trigger","new-window-link","custom-tooltip-link","downloadCsvLink","plusminus","plusminus-outer","force-unload-msg"]};$("a").filter(function(){return retain(this)}).click(function(){$.bypassUnloadMsg=!0});$(":input").keydown(function(e){e.keyCode===13&&($.bypassUnloadMsg=!0)});$(window).bind("beforeunload",function(e){if(!$.bypassUnloadMsg&&/((n(bsdev|bsnet|ationwide)|ctcadmin)\.co\.uk)|(localhost)$/.test(window.location.hostname))return"You have attempted to leave this page using the back button or similar. Are you sure you want to leave the page?";$.bypassUnloadMsg=!1})}function disableSubmitsOnClick(selector,blockPage){$(selector).bind("click.disableSubmitsOnClick",function(e){var localThis=$(this);localThis.hasClass("btn-clk-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation());blockPage?$.blockUI({overlayCSS:{opacity:0},message:null,fadeIn:0,fadeOut:0}):localThis.block({overlayCSS:{opacity:0},message:null,fadeIn:0,fadeOut:0}).click(function(e){e.preventDefault()});localThis.hasClass("btn-action")&&(localThis.addClass("btn-clk-disabled").removeClass("btn-action"),localThis.attr("href")==="#"&&localThis.removeAttr("href"))}).bind("enableActionButton",function(){$(this).removeClass("btn-clk-disabled").addClass("btn-action").unblock();(this.href===undefined||this.href==="")&&(this.href="#")})}function showExternalPageHelp(){loadNewWindow(externalPageHelp.uri,"externalHelp")}function loadHelpSearch(){helpSearchBox.form.submit()}function loadPageHelp(){pageHelp.contentDiv.load(pageHelp.uri,"helpPageId="+pageHelp.helpPageId,showPageHelp);pageHelp.openLink.unbind("click",this);pageHelp.openLink.bind("click",null,showPageHelp)}function showPageHelp(){pageHelp.div.show(400,function(){for(key in pageHelp.cssUpdates)pageHelp.cssUpdates[key].addClass(pageHelp.cssClass);equaliseColHeights()})}function hidePageHelp(){pageHelp.div.hide(400,function(){pageHelp.openLink.focus();for(key in pageHelp.cssUpdates)pageHelp.cssUpdates[key].removeClass(pageHelp.cssClass);equaliseColHeights()})}function loadNewWindow(url,windowName){var popUpWidth=780,popUpHeight=500,x=(screen.width-popUpWidth)/2,y=(screen.height-popUpHeight)/2,newWindow=window.open(url,windowName,"status,height="+popUpHeight+",width="+popUpWidth+",top="+y+",left="+x+",screenX="+x+",screenY="+y+",scrollbars=yes,resizable=yes");newWindow.focus()}var contentViewStatus,foolproof;(function(factory){typeof define=="function"&&define.amd?define(["jquery"],factory):factory(jQuery)})(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.");return}var validator=$.data(this[0],"validator");if(validator)return validator;if(this.attr("novalidate","novalidate"),validator=new $.validator(options,this[0]),$.data(this[0],"validator",validator),validator.settings.onsubmit){this.on("click.validate",":submit",function(event){validator.settings.submitHandler&&(validator.submitButton=event.target);$(this).hasClass("cancel")&&(validator.cancelSubmit=!0);$(this).attr("formnovalidate")!==undefined&&(validator.cancelSubmit=!0)});this.on("submit.validate",function(event){function handle(){var hidden,result;return validator.settings.submitHandler?(validator.submitButton&&(hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)),result=validator.settings.submitHandler.call(validator,validator.currentForm,event),validator.submitButton&&hidden.remove(),result!==undefined)?result:!1:!0}return(validator.settings.debug&&event.preventDefault(),validator.cancelSubmit)?(validator.cancelSubmit=!1,handle()):validator.form()?validator.pendingRequest?(validator.formSubmitted=!0,!1):handle():(validator.focusInvalid(),!1)})}return validator},valid:function(){var valid,validator,errorList;return $(this[0]).is("form")?valid=this.validate().form():(errorList=[],valid=!0,validator=$(this[0].form).validate(),this.each(function(){valid=validator.element(this)&&valid;errorList=errorList.concat(validator.errorList)}),validator.errorList=errorList),valid},rules:function(command,argument){var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":return argument?(filtered={},$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];method==="required"&&$(element).removeAttr("aria-required")}),filtered):(delete staticRules[element.name],existingRules)}}return data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element),data.required&&(param=data.required,delete data.required,data=$.extend({required:param},data),$(element).attr("aria-required","true")),data.remote&&(param=data.remote,delete data.remote,data=$.extend(data,{remote:param})),data}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}});$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options);this.currentForm=form;this.init()};$.validator.format=function(source,params){return arguments.length===1?function(){var args=$.makeArray(arguments);return args.unshift(source),$.validator.format.apply(this,args)}:(arguments.length>2&&params.constructor!==Array&&(params=$.makeArray(arguments).slice(1)),params.constructor!==Array&&(params=[params]),$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})}),source)};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(element){this.lastActive=element;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(element)))},onfocusout:function(element){!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))&&this.element(element)},onkeyup:function(element,event){var excludedKeys=[16,17,18,20,35,36,37,38,39,40,45,144,225];if(event.which===9&&this.elementValue(element)===""||$.inArray(event.keyCode,excludedKeys)!==-1)return;else(element.name in this.submitted||element===this.lastElement)&&this.element(element)},onclick:function(element){element.name in this.submitted?this.element(element):element.parentNode.name in this.submitted&&this.element(element.parentNode)},highlight:function(element,errorClass,validClass){element.type==="radio"?this.findByName(element.name).addClass(errorClass).removeClass(validClass):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){element.type==="radio"?this.findByName(element.name).removeClass(errorClass).addClass(validClass):$(element).removeClass(errorClass).addClass(validClass)}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function delegate(event){var validator=$.data(this.form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;settings[eventType]&&!$(this).is(settings.ignore)&&settings[eventType].call(validator,this,event)}this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=this.groups={},rules;$.each(this.settings.groups,function(key,value){typeof value=="string"&&(value=value.split(/\s/));$.each(value,function(index,name){groups[name]=key})});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});$(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",delegate).on("click.validate","select, option, [type='radio'], [type='checkbox']",delegate);if(this.settings.invalidHandler)$(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler);$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.valid()||$(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),result=!0;return this.lastElement=checkElement,checkElement===undefined?delete this.invalid[cleanElement.name]:(this.prepareElement(checkElement),this.currentElements=$(checkElement),result=this.check(checkElement)!==!1,result?delete this.invalid[checkElement.name]:this.invalid[checkElement.name]=!0),$(element).attr("aria-invalid",!result),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors)this.errorList.push({message:errors[name],element:this.findByName(name)[0]});this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){$.fn.resetForm&&$(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();var i,elements=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(i=0;elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,"");else elements.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0,i;for(i in obj)count++;return count},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length===1&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return(!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in rulesCache||!validator.objectLength($(this).rules()))?!1:(rulesCache[this.name]=!0,!0)})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element)},elementValue:function(element){var val,$element=$(element),type=element.type;if(type==="radio"||type==="checkbox")return this.findByName(element.name).filter(":checked").val();else if(type==="number"&&typeof element.validity!="undefined")return element.validity.badInput?!1:$element.val();return(val=$element.val(),typeof val=="string")?val.replace(/\r/g,""):val},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i}).length,dependencyMismatch=!1,val=this.elementValue(element),result,method,rule;for(method in rules){rule={method:method,parameters:rules[method]};try{if(result=$.validator.methods[method].call(this,val,element,rule.parameters),result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=!0;continue}if(dependencyMismatch=!1,result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return}if(!result)return this.formatAndAdd(element,rule),!1}catch(e){this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e);e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.");throw e;}}if(!dependencyMismatch)return this.objectLength(rules)&&this.successList.push(element),!0},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg")},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(arguments[i]!==undefined)return arguments[i];return undefined},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"<\/strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;typeof message=="function"?message=message.call(this,rule.parameters,element):theregex.test(message)&&(message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters));this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message},addWrapper:function(toToggle){return this.settings.wrapper&&(toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))),toToggle},defaultShowErrors:function(){for(var elements,error,i=0;this.errorList[i];i++)error=this.errorList[i],this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass),this.showLabel(error.element,error.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,elements=this.validElements();elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var place,group,errorID,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");error.length?(error.removeClass(this.settings.validClass).addClass(this.settings.errorClass),error.html(message)):(error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||""),place=error,this.settings.wrapper&&(place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(place):this.settings.errorPlacement?this.settings.errorPlacement(place,$(element)):place.insertAfter(element),error.is("label")?error.attr("for",elementID):error.parents("label[for='"+elementID+"']").length===0&&(errorID=error.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),describedBy?describedBy.match(new RegExp("\\b"+errorID+"\\b"))||(describedBy+=" "+errorID):describedBy=errorID,$(element).attr("aria-describedby",describedBy),group=this.groups[element.name],group&&$.each(this.groups,function(name,testgroup){testgroup===group&&$("[name='"+name+"']",this.currentForm).attr("aria-describedby",error.attr("id"))})));!message&&this.settings.success&&(error.text(""),typeof this.settings.success=="string"?error.addClass(this.settings.success):this.settings.success(error,element));this.toShow=this.toShow.add(error)},errorsFor:function(element){var name=this.idOrName(element),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";return describer&&(selector=selector+", #"+describer.replace(/\s+/g,", #")),this.errors().filter(selector)},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){return this.checkable(element)&&(element=this.findByName(element.name)),$(element).not(this.settings.ignore)[0]},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):!0},dependTypes:{boolean:function(param){return param},string:function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){this.pending[element.name]||(this.pendingRequest++,this.pending[element.name]=!0)},stopRequest:function(element,valid){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[element.name];valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()?($(this.currentForm).submit(),this.formSubmitted=!1):!valid&&this.pendingRequest===0&&this.formSubmitted&&($(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,"remote")})},destroy:function(){this.resetForm();$(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){className.constructor===String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className)},classRules:function(element){var rules={},classes=$(element).attr("class");return classes&&$.each(classes.split(" "),function(){this in $.validator.classRuleSettings&&$.extend(rules,$.validator.classRuleSettings[this])}),rules},normalizeAttributeRule:function(rules,type,method,value){/min|max/.test(method)&&(type===null||/number|range|text/.test(type))&&(value=Number(value),isNaN(value)&&(value=undefined));value||value===0?rules[method]=value:type===method&&type!=="range"&&(rules[method]=!0)},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods)method==="required"?(value=element.getAttribute(method),value===""&&(value=!0),value=!!value):value=$element.attr(method),this.normalizeAttributeRule(rules,type,method,value);return rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)&&delete rules.maxlength,rules},dataRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods)value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase()),this.normalizeAttributeRule(rules,type,method,value);return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");return validator.settings.rules&&(rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}),rules},normalizeRules:function(rules,element){return $.each(rules,function(prop,val){if(val===!1){delete rules[prop];return}if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break}keepRule?rules[prop]=val.param!==undefined?val.param:!0:delete rules[prop]}}),$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter}),$.each(["minlength","maxlength"],function(){rules[this]&&(rules[this]=Number(rules[this]))}),$.each(["rangelength","range"],function(){var parts;rules[this]&&($.isArray(rules[this])?rules[this]=[Number(rules[this][0]),Number(rules[this][1])]:typeof rules[this]=="string"&&(parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/),rules[this]=[Number(parts[0]),Number(parts[1])]))}),$.validator.autoCreateRanges&&(rules.min!=null&&rules.max!=null&&(rules.range=[rules.min,rules.max],delete rules.min,delete rules.max),rules.minlength!=null&&rules.maxlength!=null&&(rules.rangelength=[rules.minlength,rules.maxlength],delete rules.minlength,delete rules.maxlength)),rules},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0});data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];method.length<3&&$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0}return this.checkable(element)?this.getLength(value,element)>0:value.length>0},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)},url:function(value,element){return this.optional(element)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value)},number:function(value,element){return this.optional(element)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9 \-]+/.test(value))return!1;var nCheck=0,nDigit=0,bEven=!1,n,cDigit;if(value=value.replace(/\D/g,""),value.length<13||value.length>19)return!1;for(n=value.length-1;n>=0;n--)cDigit=value.charAt(n),nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven;return nCheck%10==0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout)target.off(".validate-equalTo").on("blur.validate-equalTo",function(){$(element).valid()});return value===target.val()},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element),validator,data;return(this.settings.messages[element.name]||(this.settings.messages[element.name]={}),previous.originalMessage=this.settings.messages[element.name].remote,this.settings.messages[element.name].remote=previous.message,param=typeof param=="string"&&{url:param}||param,previous.old===value)?previous.valid:(previous.old=value,validator=this,this.startRequest(element),data={},data[element.name]=value,$.ajax($.extend(!0,{mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===!0||response==="true",errors,message,submitted;validator.settings.messages[element.name].remote=previous.originalMessage;valid?(submitted=validator.formSubmitted,validator.prepareElement(element),validator.formSubmitted=submitted,validator.successList.push(element),delete validator.invalid[element.name],validator.showErrors()):(errors={},message=response||validator.defaultMessage(element,"remote"),errors[element.name]=previous.message=$.isFunction(message)?message(value):message,validator.invalid[element.name]=!0,validator.showErrors(errors));previous.valid=valid;validator.stopRequest(element,valid)}},param)),"pending")}}});var pendingRequests={},ajax;$.ajaxPrefilter?$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;settings.mode==="abort"&&(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=xhr)}):(ajax=$.ajax,$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;return mode==="abort"?(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=ajax.apply(this,arguments),pendingRequests[port]):ajax.apply(this,arguments)})});
/*!
** Unobtrusive validation support library for jQuery and jQuery Validate
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function($){function setValidationValues(options,ruleName,value){options.rules[ruleName]=value;options.message&&(options.messages[ruleName]=options.message)}function splitAndTrim(value){return value.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function escapeAttributeValue(value){return value.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function getModelPrefix(fieldName){return fieldName.substr(0,fieldName.lastIndexOf(".")+1)}function appendModelPrefix(value,prefix){return value.indexOf("*.")===0&&(value=value.replace("*.",prefix)),value}function onError(error,inputElement){var container=$(this).find("[data-valmsg-for='"+escapeAttributeValue(inputElement[0].name)+"']"),replaceAttrValue=container.attr("data-valmsg-replace"),replace=replaceAttrValue?$.parseJSON(replaceAttrValue)!==!1:null;container.removeClass("field-validation-valid").addClass("field-validation-error");error.data("unobtrusiveContainer",container);replace?(container.empty(),error.removeClass("input-validation-error").appendTo(container)):error.hide()}function onErrors(event,validator){var container=$(this).find("[data-valmsg-summary=true]"),list=container.find("ul");list&&list.length&&validator.errorList.length&&(list.empty(),container.addClass("validation-summary-errors").removeClass("validation-summary-valid"),$.each(validator.errorList,function(){$("<li />").html(this.message).appendTo(list)}))}function onSuccess(error){var container=error.data("unobtrusiveContainer"),replaceAttrValue=container.attr("data-valmsg-replace"),replace=replaceAttrValue?$.parseJSON(replaceAttrValue):null;container&&(container.addClass("field-validation-valid").removeClass("field-validation-error"),error.removeData("unobtrusiveContainer"),replace&&container.empty())}function onReset(event){var $form=$(this),key="__jquery_unobtrusive_validation_form_reset";if(!$form.data(key)){$form.data(key,!0);try{$form.data("validator").resetForm()}finally{$form.removeData(key)}$form.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");$form.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function validationInfo(form){var $form=$(form),result=$form.data(data_validation),onResetProxy=$.proxy(onReset,form),defaultOptions=$jQval.unobtrusive.options||{},execInContext=function(name,args){var func=defaultOptions[name];func&&$.isFunction(func)&&func.apply(form,args)};return result||(result={options:{errorClass:defaultOptions.errorClass||"input-validation-error",errorElement:defaultOptions.errorElement||"span",errorPlacement:function(){onError.apply(form,arguments);execInContext("errorPlacement",arguments)},invalidHandler:function(){onErrors.apply(form,arguments);execInContext("invalidHandler",arguments)},messages:{},rules:{},success:function(){onSuccess.apply(form,arguments);execInContext("success",arguments)}},attachValidation:function(){$form.off("reset."+data_validation,onResetProxy).on("reset."+data_validation,onResetProxy).validate(this.options)},validate:function(){return $form.validate(),$form.valid()}},$form.data(data_validation,result)),result}var $jQval=$.validator,adapters,data_validation="unobtrusiveValidation";$jQval.unobtrusive={adapters:[],parseElement:function(element,skipAttach){var $element=$(element),form=$element.parents("form")[0],valInfo,rules,messages;form&&(valInfo=validationInfo(form),valInfo.options.rules[element.name]=rules={},valInfo.options.messages[element.name]=messages={},$.each(this.adapters,function(){var prefix="data-val-"+this.name,message=$element.attr(prefix),paramValues={};message!==undefined&&(prefix+="-",$.each(this.params,function(){paramValues[this]=$element.attr(prefix+this)}),this.adapt({element:element,form:form,message:message,params:paramValues,rules:rules,messages:messages}))}),$.extend(rules,{__dummy__:!0}),skipAttach||valInfo.attachValidation())},parse:function(selector){var $selector=$(selector),$forms=$selector.parents().addBack().filter("form").add($selector.find("form")).has("[data-val=true]");$selector.find("[data-val=true]").each(function(){$jQval.unobtrusive.parseElement(this,!0)});$forms.each(function(){var info=validationInfo(this);info&&info.attachValidation()})}};adapters=$jQval.unobtrusive.adapters;adapters.add=function(adapterName,params,fn){return fn||(fn=params,params=[]),this.push({name:adapterName,params:params,adapt:fn}),this};adapters.addBool=function(adapterName,ruleName){return this.add(adapterName,function(options){setValidationValues(options,ruleName||adapterName,!0)})};adapters.addMinMax=function(adapterName,minRuleName,maxRuleName,minMaxRuleName,minAttribute,maxAttribute){return this.add(adapterName,[minAttribute||"min",maxAttribute||"max"],function(options){var min=options.params.min,max=options.params.max;min&&max?setValidationValues(options,minMaxRuleName,[min,max]):min?setValidationValues(options,minRuleName,min):max&&setValidationValues(options,maxRuleName,max)})};adapters.addSingleVal=function(adapterName,attribute,ruleName){return this.add(adapterName,[attribute||"val"],function(options){setValidationValues(options,ruleName||adapterName,options.params[attribute])})};$jQval.addMethod("__dummy__",function(value,element,params){return!0});$jQval.addMethod("regex",function(value,element,params){var match;return this.optional(element)?!0:(match=new RegExp(params).exec(value),match&&match.index===0&&match[0].length===value.length)});$jQval.addMethod("nonalphamin",function(value,element,nonalphamin){var match;return nonalphamin&&(match=value.match(/\W/g),match=match&&match.length>=nonalphamin),match});$jQval.methods.extension?(adapters.addSingleVal("accept","mimtype"),adapters.addSingleVal("extension","extension")):adapters.addSingleVal("extension","extension","accept");adapters.addSingleVal("regex","pattern");adapters.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");adapters.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");adapters.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength");adapters.add("equalto",["other"],function(options){var prefix=getModelPrefix(options.element.name),other=options.params.other,fullOtherName=appendModelPrefix(other,prefix),element=$(options.form).find(":input").filter("[name='"+escapeAttributeValue(fullOtherName)+"']")[0];setValidationValues(options,"equalTo",element)});adapters.add("required",function(options){(options.element.tagName.toUpperCase()!=="INPUT"||options.element.type.toUpperCase()!=="CHECKBOX")&&setValidationValues(options,"required",!0)});adapters.add("remote",["url","type","additionalfields"],function(options){var value={url:options.params.url,type:options.params.type||"GET",data:{}},prefix=getModelPrefix(options.element.name);$.each(splitAndTrim(options.params.additionalfields||options.element.name),function(i,fieldName){var paramName=appendModelPrefix(fieldName,prefix);value.data[paramName]=function(){var field=$(options.form).find(":input").filter("[name='"+escapeAttributeValue(paramName)+"']");if(field.is(":checkbox"))return field.filter(":checked").val()||field.filter(":hidden").val()||"";else if(field.is(":radio"))return field.filter(":checked").val()||"";return field.val()}});setValidationValues(options,"remote",value)});adapters.add("password",["min","nonalphamin","regex"],function(options){options.params.min&&setValidationValues(options,"minlength",options.params.min);options.params.nonalphamin&&setValidationValues(options,"nonalphamin",options.params.nonalphamin);options.params.regex&&setValidationValues(options,"regex",options.params.regex)});$(function(){$jQval.unobtrusive.parse(document)})})(jQuery);
/*!
* Copyright (c) Nationwide Building Society 2010. All rights reserved.
*
*/
(function($){$.fn.pageMessageArea=function(options){if(typeof options=="string"){var args=Array.prototype.slice.call(arguments,1),res;return(this.each(function(){var self=$(this),methods=self.data("pageMessageArea"),r;methods&&(r=methods[options].apply(this,args),res==undefined&&(res=r))}),res!=undefined)?res:this}return options=$.extend({container:"div.inner-msg",type:"error",title:"Error"},options||{}),this.each(function(){function list(message){return"<p>"+message+"<\/p>"}function div(element,search){var $element=$(element);return $element.hasClass("page-msg")?$element:(search||(search="page-msg"),$element.find("."+search))}var that=$(this),methods;that.data("pageMessageArea")||(methods={show:function(showOptions,isResizeAfterAnimation){var arr=[],item,len,searchString,messageDiv,container,messages;if(showOptions){if(item=showOptions.messageItem,item&&(showOptions.messageType=item.MessageType,showOptions.title=item.Title,showOptions.messages=item.MessageText.value?[item.MessageText.value]:[item.MessageText]),len=showOptions.messages?showOptions.messages.length:0,len)while(len--)arr.push(showOptions.messages[len]);switch(showOptions.messageType){case 0:showOptions.type="Confirm";break;case 1:showOptions.type="Error";break;case 2:showOptions.type="Info";break;case 3:showOptions.type="Warning";break}}searchString=(showOptions.type||options.type).toLowerCase()+"-msg";messageDiv=div(this,searchString);messageDiv.removeClass("no-msg");container=messageDiv.find(options.container);messages=[];container.children("p").each(function(){messages.push($(this).html())});$.each(arr,function(index,value){$.inArray(value,messages)==-1&&container.append(list(value))});messageDiv.find("h2").html("<span><\/span>"+(showOptions.title||options.title)).end().slideDown(200,function(){isResizeAfterAnimation&&$(window).trigger("resize")});$(window).trigger("resize")},append:function(message,title){var container=div(this).find(options.container);container.append(list(message));title&&container.prev().append(title)},clear:function(){div(this).find(options.container).empty()},hide:function(isResizeAfterAnimation){div(this).slideUp(200,function(){isResizeAfterAnimation&&$(window).trigger("resize")});$(window).trigger("resize")}},that.data("pageMessageArea",methods))})}})(jQuery);
/*!
    Colorbox 1.5.14
    license: MIT
    http://www.jacklmoore.com/colorbox
*/
(function($,document,window){function $tag(tag,id,css){var element=document.createElement(tag);return id&&(element.id=prefix+id),css&&(element.style.cssText=css),$(element)}function winheight(){return window.innerHeight?window.innerHeight:$(window).height()}function Settings(element,options){options!==Object(options)&&(options={});this.cache={};this.el=element;this.value=function(key){var dataAttr;return this.cache[key]===undefined&&(dataAttr=$(this.el).attr("data-cbox-"+key),dataAttr!==undefined?this.cache[key]=dataAttr:options[key]!==undefined?this.cache[key]=options[key]:defaults[key]!==undefined&&(this.cache[key]=defaults[key])),this.cache[key]};this.get=function(key){var value=this.value(key);return $.isFunction(value)?value.call(this.el,this):value}}function getIndex(increment){var max=$related.length,newIndex=(index+increment)%max;return newIndex<0?max+newIndex:newIndex}function setSize(size,dimension){return Math.round((/%/.test(size)?(dimension==="x"?$window.width():winheight())/100:1)*parseInt(size,10))}function isImage(settings,url){return settings.get("photo")||settings.get("photoRegex").test(url)}function retinaUrl(settings,url){return settings.get("retinaUrl")&&window.devicePixelRatio>1?url.replace(settings.get("photoRegex"),settings.get("retinaSuffix")):url}function trapFocus(e){"contains"in $box[0]&&!$box[0].contains(e.target)&&e.target!==$overlay[0]&&(e.stopPropagation(),$box.focus())}function setClass(str){setClass.str!==str&&($box.add($overlay).removeClass(setClass.str).addClass(str),setClass.str=str)}function getRelated(rel){index=0;rel&&rel!==!1&&rel!=="nofollow"?($related=$("."+boxElement).filter(function(){var options=$.data(this,colorbox),settings=new Settings(this,options);return settings.get("rel")===rel}),index=$related.index(settings.el),index===-1&&($related=$related.add(settings.el),index=$related.length-1)):$related=$(settings.el)}function trigger(event){$(document).trigger(event);$events.triggerHandler(event)}function launch(element){var options,opacity;if(!closing){if(options=$(element).data(colorbox),settings=new Settings(element,options),getRelated(settings.get("rel")),!open){open=active=!0;setClass(settings.get("className"));$box.css({visibility:"hidden",display:"block",opacity:""});$loaded=$tag(div,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden");$content.css({width:"",height:""}).append($loaded);interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(!0)-$content.height();interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(!0)-$content.width();loadedHeight=$loaded.outerHeight(!0);loadedWidth=$loaded.outerWidth(!0);var initialWidth=setSize(settings.get("initialWidth"),"x"),initialHeight=setSize(settings.get("initialHeight"),"y"),maxWidth=settings.get("maxWidth"),maxHeight=settings.get("maxHeight");if(settings.w=(maxWidth!==!1?Math.min(initialWidth,setSize(maxWidth,"x")):initialWidth)-loadedWidth-interfaceWidth,settings.h=(maxHeight!==!1?Math.min(initialHeight,setSize(maxHeight,"y")):initialHeight)-loadedHeight-interfaceHeight,$loaded.css({width:"",height:settings.h}),publicMethod.position(),trigger(event_open),settings.get("onOpen"),$groupControls.add($title).hide(),$box.focus(),settings.get("trapFocus")&&document.addEventListener){document.addEventListener("focus",trapFocus,!0);$events.one(event_closed,function(){document.removeEventListener("focus",trapFocus,!0)})}if(settings.get("returnFocus"))$events.one(event_closed,function(){$(settings.el).focus()})}opacity=parseFloat(settings.get("opacity"));$overlay.css({opacity:opacity===opacity?opacity:"",cursor:settings.get("overlayClose")?"pointer":"",visibility:"visible"}).show();settings.get("showClose")?$close.prependTo($content):$close.appendTo("<div />");load()}}function appendHTML(){$box||(init=!1,$window=$(window),$box=$tag(div).attr({id:colorbox,"class":$.support.opacity===!1?prefix+"IE":"",role:"dialog",tabindex:"-1"}).hide(),$overlay=$tag(div,"Overlay").hide(),$loadingOverlay=$([$tag(div,"LoadingOverlay")[0],$tag(div,"LoadingGraphic")[0]]),$wrap=$tag(div,"Wrapper"),$content=$tag(div,"Content").append($title=$tag(div,"Title"),$current=$tag(div,"Current"),$prev=$('<button type="button"/>').attr({id:prefix+"Previous"}),$next=$('<button type="button"/>').attr({id:prefix+"Next"}),$slideshow=$tag("button","Slideshow"),$loadingOverlay),$close=$('<a id="cboxClose" href="#"><b class="button"><\/b><i><\/i><\/a>'),$close.attr("title",$("#lightbox-details-close-icon-title").text()),$close.find("i").html($("#lightbox-details-close-icon-hidden-html").html()),$wrap.append($tag(div).append($tag(div,"TopLeft"),$topBorder=$tag(div,"TopCenter"),$tag(div,"TopRight")),$tag(div,!1,"clear:left").append($leftBorder=$tag(div,"MiddleLeft"),$content,$rightBorder=$tag(div,"MiddleRight")),$tag(div,!1,"clear:left").append($tag(div,"BottomLeft"),$bottomBorder=$tag(div,"BottomCenter"),$tag(div,"BottomRight"))).find("div div").css({float:"left"}),$loadingBay=$tag(div,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),$groupControls=$next.add($prev).add($current).add($slideshow));document.body&&!$box.parent().length&&$(document.body).append($overlay,$box.append($wrap,$loadingBay))}function addBindings(){function clickHandler(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),launch(this))}if($box){if(!init)if(init=!0,$next.click(function(){publicMethod.next()}),$prev.click(function(){publicMethod.prev()}),$close.click(function(e){e.preventDefault();publicMethod.close()}),$overlay.click(function(){settings.get("overlayClose")&&publicMethod.close()}),$(document).bind("keydown."+prefix,function(e){var key=e.keyCode;open&&settings.get("escKey")&&key===27&&(e.preventDefault(),publicMethod.close());open&&settings.get("arrowKey")&&$related[1]&&!e.altKey&&(key===37?(e.preventDefault(),$prev.click()):key===39&&(e.preventDefault(),$next.click()))}),$.isFunction($.fn.on))$(document).on("click."+prefix,"."+boxElement,clickHandler);else $("."+boxElement).live("click."+prefix,clickHandler);return!0}return!1}function load(){var href,setResize,prep=publicMethod.prep,$inline,request=++requests,$target;if(active=!0,photo=!1,trigger(event_purge),trigger(event_load),settings.get("onLoad"),settings.h=settings.get("height")?setSize(settings.get("height"),"y")-loadedHeight-interfaceHeight:settings.get("innerHeight")&&setSize(settings.get("innerHeight"),"y"),settings.w=settings.get("width")?setSize(settings.get("width"),"x")-loadedWidth-interfaceWidth:settings.get("innerWidth")&&setSize(settings.get("innerWidth"),"x"),settings.mw=settings.w,settings.mh=settings.h,settings.get("maxWidth")&&(settings.mw=setSize(settings.get("maxWidth"),"x")-loadedWidth-interfaceWidth,settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw),settings.get("maxHeight")&&(settings.mh=setSize(settings.get("maxHeight"),"y")-loadedHeight-interfaceHeight,settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh),href=settings.get("href"),loadingTimer=setTimeout(function(){$loadingOverlay.show()},100),settings.get("inline")){$target=$(href);$inline=$("<div>").hide().insertBefore($target);$events.one(event_purge,function(){$inline.replaceWith($target)});prep($target)}else if(settings.get("iframe"))prep(" ");else if(settings.get("html"))prep(settings.get("html"));else if(isImage(settings,href)){href=retinaUrl(settings,href);photo=new Image;$(photo).addClass(prefix+"Photo").bind("error",function(){prep($tag(div,"Error").html(settings.get("imgError")))}).one("load",function(){request===requests&&setTimeout(function(){var percent;$.each(["alt","longdesc","aria-describedby"],function(i,val){var attr=$(settings.el).attr(val)||$(settings.el).attr("data-"+val);attr&&photo.setAttribute(val,attr)});settings.get("retinaImage")&&window.devicePixelRatio>1&&(photo.height=photo.height/window.devicePixelRatio,photo.width=photo.width/window.devicePixelRatio);settings.get("scalePhotos")&&(setResize=function(){photo.height-=photo.height*percent;photo.width-=photo.width*percent},settings.mw&&photo.width>settings.mw&&(percent=(photo.width-settings.mw)/photo.width,setResize()),settings.mh&&photo.height>settings.mh&&(percent=(photo.height-settings.mh)/photo.height,setResize()));settings.h&&(photo.style.marginTop=Math.max(settings.mh-photo.height,0)/2+"px");$related[1]&&(settings.get("loop")||$related[index+1])&&(photo.style.cursor="pointer",photo.onclick=function(){publicMethod.next()});photo.style.width=photo.width+"px";photo.style.height=photo.height+"px";prep(photo)},1)});photo.src=href}else href&&$loadingBay.load(href,settings.get("data"),function(data,status){request===requests&&prep(status==="error"?$tag(div,"Error").html(settings.get("xhrError")):$(this).contents())})}var defaults={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,showClose:!0,escKey:!0,arrowKey:!0,nested:!1,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return $(this).attr("href")},title:function(){return this.title}},colorbox="colorbox",prefix="cbox",boxElement=prefix+"Element",event_open=prefix+"_open",event_load=prefix+"_load",event_complete=prefix+"_complete",event_cleanup=prefix+"_cleanup",event_closed=prefix+"_closed",event_purge=prefix+"_purge",$overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,$events=$("<a/>"),settings,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,index,photo,open,active,closing,loadingTimer,publicMethod,div="div",requests=0,previousCSS={},init,slideshow=function(){function clear(){clearTimeout(timeOut)}function set(){(settings.get("loop")||$related[index+1])&&(clear(),timeOut=setTimeout(publicMethod.next,settings.get("slideshowSpeed")))}function start(){$slideshow.html(settings.get("slideshowStop")).unbind(click).one(click,stop);$events.bind(event_complete,set).bind(event_load,clear);$box.removeClass(className+"off").addClass(className+"on")}function stop(){clear();$events.unbind(event_complete,set).unbind(event_load,clear);$slideshow.html(settings.get("slideshowStart")).unbind(click).one(click,function(){publicMethod.next();start()});$box.removeClass(className+"on").addClass(className+"off")}function reset(){active=!1;$slideshow.hide();clear();$events.unbind(event_complete,set).unbind(event_load,clear);$box.removeClass(className+"off "+className+"on")}var active,className=prefix+"Slideshow_",click="click."+prefix,timeOut;return function(){if(active)settings.get("slideshow")||($events.unbind(event_cleanup,reset),reset());else if(settings.get("slideshow")&&$related[1]){active=!0;$events.one(event_cleanup,reset);settings.get("slideshowAuto")?start():stop();$slideshow.show()}}}();$[colorbox]||($(appendHTML),publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var settings,$obj=this;if(options=options||{},$.isFunction($obj))$obj=$("<a/>"),options.open=!0;else if(!$obj[0])return $obj;return $obj[0]?(appendHTML(),addBindings()&&(callback&&(options.onComplete=callback),$obj.each(function(){var old=$.data(this,colorbox)||{};$.data(this,colorbox,$.extend(old,options))}).addClass(boxElement),settings=new Settings($obj[0],options),settings.get("open")&&launch($obj[0])),options.nested!==!0&&($.fn.colorbox.prototype.nestedOptions=options),settings.get("inline")&&$(settings.get("href")+" a").trigger("enableActionButton"),$obj):$obj},publicMethod.position=function(speed,loadedCallback){function modalDimensions(){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=parseInt($box[0].style.width,10)-interfaceWidth+"px";$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=parseInt($box[0].style.height,10)-interfaceHeight+"px"}var css,top=0,left=0,offset=$box.offset(),scrollTop,scrollLeft,tempSpeed;$window.unbind("resize."+prefix);$box.css({top:-9e4,left:-9e4});scrollTop=$window.scrollTop();scrollLeft=$window.scrollLeft();settings.get("fixed")?(offset.top-=scrollTop,offset.left-=scrollLeft,$box.css({position:"fixed"})):(top=scrollTop,left=scrollLeft,$box.css({position:"absolute"}));left+=settings.get("right")!==!1?Math.max($window.width()-settings.w-loadedWidth-interfaceWidth-setSize(settings.get("right"),"x"),0):settings.get("left")!==!1?setSize(settings.get("left"),"x"):Math.round(Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2);top+=settings.get("bottom")!==!1?Math.max(winheight()-settings.h-loadedHeight-interfaceHeight-setSize(settings.get("bottom"),"y"),0):settings.get("top")!==!1?setSize(settings.get("top"),"y"):Math.round(Math.max(winheight()-settings.h-loadedHeight-interfaceHeight,0)/2);$box.css({top:offset.top,left:offset.left,visibility:"visible"});$wrap[0].style.width=$wrap[0].style.height="9999px";css={width:settings.w+loadedWidth+interfaceWidth,height:settings.h+loadedHeight+interfaceHeight,top:top,left:left};speed&&(tempSpeed=0,$.each(css,function(i){if(css[i]!==previousCSS[i]){tempSpeed=speed;return}}),speed=tempSpeed);previousCSS=css;speed||$box.css(css);$box.dequeue().animate(css,{duration:speed||0,complete:function(){modalDimensions();active=!1;$wrap[0].style.width=settings.w+loadedWidth+interfaceWidth+"px";$wrap[0].style.height=settings.h+loadedHeight+interfaceHeight+"px";settings.get("reposition")&&setTimeout(function(){$window.bind("resize."+prefix,publicMethod.position)},1);$.isFunction(loadedCallback)&&loadedCallback()},step:modalDimensions})},publicMethod.resize=function(options){var scrolltop;open&&(options=options||{},options.width&&(settings.w=setSize(options.width,"x")-loadedWidth-interfaceWidth),options.innerWidth&&(settings.w=setSize(options.innerWidth,"x")),$loaded.css({width:settings.w}),options.height&&(settings.h=setSize(options.height,"y")-loadedHeight-interfaceHeight),options.innerHeight&&(settings.h=setSize(options.innerHeight,"y")),options.innerHeight||options.height||(scrolltop=$loaded.scrollTop(),$loaded.css({height:"auto"}),settings.h=$loaded.height()),$loaded.css({height:settings.h}),scrolltop&&$loaded.scrollTop(scrolltop),publicMethod.position(settings.get("transition")==="none"?0:settings.get("speed")))},publicMethod.prep=function(object){function getWidth(){return settings.w=settings.w||$loaded.width(),settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w,settings.w}function getHeight(){return settings.h=settings.h||$loaded.height(),settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h,settings.h}if(open){var callback,speed=settings.get("transition")==="none"?0:settings.get("speed");$loaded.remove();$loaded=$tag(div,"LoadedContent").append(object);$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.get("scrolling")?"auto":"hidden"}).css({height:getHeight()}).prependTo($content);$loadingBay.hide();$(photo).css({float:"none"});setClass(settings.get("className"));callback=function(){function removeFilter(){$.support.opacity===!1&&$box[0].style.removeAttribute("filter")}var total=$related.length,iframe,complete;if(open){if(complete=function(){clearTimeout(loadingTimer);$loadingOverlay.hide();trigger(event_complete);settings.get("onComplete")},$title.html(settings.get("title")).show(),$loaded.show(),total>1?(typeof settings.get("current")=="string"&&$current.html(settings.get("current").replace("{current}",index+1).replace("{total}",total)).show(),$next[settings.get("loop")||index<total-1?"show":"hide"]().html(settings.get("next")),$prev[settings.get("loop")||index?"show":"hide"]().html(settings.get("previous")),slideshow(),settings.get("preloading")&&$.each([getIndex(-1),getIndex(1)],function(){var img,i=$related[this],settings=new Settings(i,$.data(i,colorbox)),src=settings.get("href");src&&isImage(settings,src)&&(src=retinaUrl(settings,src),img=document.createElement("img"),img.src=src)})):$groupControls.hide(),settings.get("iframe")){iframe=document.createElement("iframe");"frameBorder"in iframe&&(iframe.frameBorder=0);"allowTransparency"in iframe&&(iframe.allowTransparency="true");settings.get("scrolling")||(iframe.scrolling="no");$(iframe).attr({src:settings.get("href"),name:(new Date).getTime(),"class":prefix+"Iframe",allowFullScreen:!0}).one("load",complete).appendTo($loaded);$events.one(event_purge,function(){iframe.src="//about:blank"});settings.get("fastIframe")&&$(iframe).trigger("load")}else complete();settings.get("transition")==="fade"?$box.fadeTo(speed,1,removeFilter):removeFilter()}};settings.get("transition")==="fade"?$box.fadeTo(speed,0,function(){publicMethod.position(0,callback)}):publicMethod.position(speed,callback)}},publicMethod.next=function(){!active&&$related[1]&&(settings.get("loop")||$related[index+1])&&(index=getIndex(1),launch($related[index]))},publicMethod.prev=function(){!active&&$related[1]&&(settings.get("loop")||index)&&(index=getIndex(-1),launch($related[index]))},publicMethod.close=function(){open&&!closing&&(closing=!0,open=!1,trigger(event_cleanup),settings.get("onCleanup"),$window.unbind("."+prefix),$overlay.fadeTo(settings.get("fadeOut")||0,0),$box.stop().fadeTo(settings.get("fadeOut")||0,0,function(){$box.hide();$overlay.hide();trigger(event_purge);$loaded.remove();setTimeout(function(){closing=!1;trigger(event_closed);settings.get("onClosed");settings.get("nested")===!0&&$.colorbox.prototype.nestedOptions?$.colorbox($.colorbox.prototype.nestedOptions):$.colorbox.prototype.nestedOptions=!1},1)}))},publicMethod.remove=function(){$box&&($box.stop(),$[colorbox].close(),$box.stop(!1,!0).remove(),$overlay.remove(),closing=!1,$box=null,$("."+boxElement).removeData(colorbox).removeClass(boxElement),$(document).unbind("click."+prefix).unbind("keydown."+prefix))},publicMethod.element=function(){return $(settings.el)},publicMethod.settings=defaults)})(jQuery,document,window);
/*!
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 */
(function(jQuery){function keyHandler(handleObj){if(typeof handleObj.data=="string"){var origHandler=handleObj.handler,keys=handleObj.data.toLowerCase().split(" ");handleObj.handler=function(event){var i,l;if(this===event.target||!/textarea|select/i.test(event.target.nodeName)&&event.target.type!=="text"){var special=event.type!=="keypress"&&jQuery.hotkeys.specialKeys[event.which],character=String.fromCharCode(event.which).toLowerCase(),key,modif="",possible={};for(event.altKey&&special!=="alt"&&(modif+="alt+"),event.ctrlKey&&special!=="ctrl"&&(modif+="ctrl+"),event.metaKey&&!event.ctrlKey&&special!=="meta"&&(modif+="meta+"),event.shiftKey&&special!=="shift"&&(modif+="shift+"),special?possible[modif+special]=!0:(possible[modif+character]=!0,possible[modif+jQuery.hotkeys.shiftNums[character]]=!0,modif==="shift+"&&(possible[jQuery.hotkeys.shiftNums[character]]=!0)),i=0,l=keys.length;i<l;i++)if(possible[keys[i]])return origHandler.apply(this,arguments)}}}}jQuery.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};jQuery.each(["keydown","keyup","keypress"],function(){jQuery.event.special[this]={add:keyHandler}})})(jQuery);$(document).ready(function(){function setupCustomTitles(){var ctOpen=!1;$("div.ct, span.ct").each(function(){var customTitleId=this.id,customTitleSelector=$("#"+customTitleId),customTitleEl=$(this),associatedElementSelector,associatedElement,mouseHoverOnElement;customTitleSelector.hasClass("ct-north")?customTitleEl.append('<b class="ct-arrow-bottom"><\/b>'):customTitleEl.append('<b class="ct-arrow-top"><\/b>');associatedElementSelector="a[aria-describedby="+customTitleId+"]:first";associatedElement=$(associatedElementSelector).removeAttr("title");customTitleSelector.hasClass("ct-focusOnly")||associatedElement.hover(function(){ctOpen=!0;$(".ct").stop().hide();associatedElement.data("pos",associatedElement.position()).data("width",associatedElement.outerWidth()).data("parent-height",associatedElement.parent().height()).data("ct-height",customTitleSelector.height());ctSetIeZindexes($(this));customTitleSelector.hasClass("ct-north")?customTitleSelector.css({zIndex:"500"}).css({top:associatedElement.data("pos").top-associatedElement.data("ct-height")-associatedElement.data("parent-height")+"px",left:associatedElement.data("pos").left-160+associatedElement.data("width")/2+"px"}):customTitleSelector.css({zIndex:"500"}).css({top:associatedElement.data("pos").top+26+"px",left:associatedElement.position().left-160+associatedElement.data("width")/2+"px"});customTitleSelector.show()},function(){var customTitle=customTitleSelector,customTitleHover=!1;ctOpen=!1;$(customTitle).hover(function(){ctOpen=!0;customTitleHover=!0},function(){customTitleHover=!1;customTitle.hide();ctOpen=!1});setTimeout(function(){customTitleHover===!1&&customTitle.hide()},200)});mouseHoverOnElement=!1;associatedElement.mouseover(function(){mouseHoverOnElement=!0}).mouseout(function(){mouseHoverOnElement=!1});associatedElement.focus(function(){var self=$(this);mouseHoverOnElement||(self.data("pos",self.parent().position()).data("width",self.outerWidth()).data("parent-height",self.parent().height()).data("ct-height",customTitleSelector.height()),ctSetIeZindexes(self),customTitleSelector.hasClass("ct-north")?customTitleSelector.css({zIndex:"501"}).css({top:self.data("pos").top-self.data("ct-height")-self.data("parent-height")+"px",left:self.data("pos").left-160+self.data("width")/2+"px"}):customTitleSelector.css({zIndex:"500"}).css({top:self.data("pos").top+26+"px",left:self.position().left-160+self.data("width")/2+"px"}),customTitleSelector.show())}).blur(function(){customTitleSelector.hide()})})}function setupCustomTooltips(){var allCustomTooltips=$("div.ctool"),linksWithAria;allCustomTooltips.length&&(linksWithAria=$("a[aria-describedby]"),$("body").click(function(){allCustomTooltips.each(function(){associatedElement=linksWithAria.filter("[aria-describedby='"+this.id+"']");associatedElement.find("b:eq(0)").removeClass("expanded");$(this).hide()})}),allCustomTooltips.each(function(){function showTooltip(){var associatedElPos,horizShift,vertShift;clearExistingTooltip();associatedElPos=associatedElement.position();ctSetIeZindexes(associatedElement);customTooltip.hasClass("ctool-north")?(horizShift=associatedElPos.left+associatedElement.outerWidth()-customTooltip.outerWidth(),vertShift=associatedElPos.top-customTooltip.outerHeight(),customTooltip.css({"z-index":"10001",left:horizShift+"px",top:vertShift+"px","-moz-border-radius-bottomright":"0","border-bottom-right-radius":"0","-webkit-border-bottom-right-radius":"0"})):customTooltip.hasClass("ctool-east")?(horizShift=associatedElPos.left+associatedElement.outerWidth(),vertShift=0,customTooltip.css({"z-index":"10001",left:horizShift+"px",top:vertShift+"px","-moz-border-radius-topleft":"0","border-top-left-radius":"0","-webkit-border-top-left-radius":"0"})):customTooltip.hasClass("ctool-east-help-info")?(horizShift=associatedElPos.left+15,vertShift=associatedElPos.top+15,customTooltip.css({"z-index":"10001",left:horizShift+"px",top:vertShift+"px","-moz-border-radius-topleft":"0","border-top-left-radius":"0","-webkit-border-top-left-radius":"0"})):customTooltip.hasClass("ctool-south")?(horizShift=associatedElPos.left+associatedElement.outerWidth()-customTooltip.outerWidth(),vertShift=associatedElPos.top+associatedElement.innerHeight(),customTooltip.css({"z-index":"10001",left:horizShift+"px",top:vertShift+"px","-moz-border-radius-topright":"0","border-top-right-radius":"0","-webkit-border-top-right-radius":"0"})):customTooltip.hasClass("ctool-west")&&(horizShift=associatedElPos.left-customTooltip.outerWidth(),vertShift=0,customTooltip.css({"z-index":"10001",left:horizShift+"px",top:vertShift+"px","-moz-border-radius-topright":"0","border-top-right-radius":"0","-webkit-border-top-right-radius":"0"}));associatedElement.find("b:eq(0)").addClass("expanded");customTooltip.show()}function hideTooltip(){associatedElement.find("b:eq(0)").removeClass("expanded");customTooltip.hide()}function clearExistingTooltip(){var existingCustomTooltips=$("div.ctool"),existinglinksWithAria;existingCustomTooltips.length&&(existinglinksWithAria=$("a[aria-describedby]"),existingCustomTooltips.each(function(){existingassociatedElement=existinglinksWithAria.filter("[aria-describedby='"+this.id+"']");existingassociatedElement.find("b:eq(0)").removeClass("expanded");$(this).hide()}))}var customTooltipId=this.id,customTooltip=$(this),associatedElement=linksWithAria.filter("[aria-describedby='"+customTooltipId+"']"),mouseHoverOnElement=!1,lastFocusableItem,focusable,index;associatedElement.mouseover(function(){mouseHoverOnElement=!0}).mouseout(function(){mouseHoverOnElement=!1});associatedElement.focus(function(){customTooltip.is(":visible")&&!mouseHoverOnElement&&hideTooltip()}).click(function(e){e.preventDefault();e.stopPropagation();customTooltip.is(":visible")?hideTooltip():showTooltip()});lastFocusableItem=customTooltip.find("div.custom-inner").find("a").last();focusable=customTooltip.parents().eq(4).find("a[href],select,input.checkbox,input.text");lastFocusableItem.length?(index=focusable.index(lastFocusableItem),index>-1&&index+1<focusable.length&&focusable.eq(index+1).focus(hideTooltip)):(index=focusable.index(associatedElement),index>-1&&index+1<focusable.length&&focusable.eq(index+1).focus(hideTooltip));index=focusable.index(associatedElement);index>-1&&index-1>=0&&focusable.eq(index-1).focus(hideTooltip)}))}function handleFlyOutNav(downKeyAdvice,escKeyAdvice){function determineMegaMenuSize(){var stageWidth=$("#stage").width();$("#nav-manage .nav-list-level-1").css({width:stageWidth+"px"})}function resetMenus(){allLists.hide();primaryNav.css({zIndex:"0"});allLists.css({zIndex:"0"});firstLevelFlyoutLists.removeClass("hasFocus hasFocusActive")}var primaryNav=$("#primary-nav"),headerEl=$("header"),allLists=primaryNav.find(">ul > li:not(#nav-manage) ul"),firstLevelFlyoutLists=primaryNav.find(">ul > li:not(#nav-manage)"),liHasFocus=!1,listCss={height:"auto",border:"1px solid #759ac7",overflow:"visible",paddingBottom:"14px"};escKeyAdvice.hide();allLists.css(listCss);primaryNav.find(">ul>li.active>ul").css({borderTop:"0"});primaryNav.find(">ul>li").hover(function(){var self=$(this),firstFlyout=self.find("ul:first"),zIndex={zIndex:500};self.hasClass("active")?self.addClass("hasFocusActive"):self.addClass("hasFocus");headerEl.css(zIndex);primaryNav.css(zIndex);firstFlyout.css(zIndex).find("li").css(zIndex).end().fadeIn(150)},function(){$(this).removeClass("hasFocus hasFocusActive");primaryNav.css({zIndex:0});allLists.hide()});primaryNav.find("ul ul li.secondaryMenu").hover(function(){$(this).find("ul:first").fadeIn(150).css(listCss).css({zIndex:"1000"})},function(){$(this).find("ul:first").hide().css({zIndex:"0"})});primaryNav.find(">ul>li>a").focus(function(){liHasFocus=!1;allLists.hide();var linkInFocus=$(this),parentListItem=linkInFocus.parent("li");firstLevelFlyoutLists.removeClass("hasFocus hasFocusActive");linkInFocus.keydown(function(e){e.keyCode===40&&(e.preventDefault(),parentListItem.hasClass("active")?parentListItem.addClass("hasFocusActive"):parentListItem.addClass("hasFocus"),parentListItem.find("ul:first, ul:first li").css({zIndex:"500"}).show(),linkInFocus.attr("aria-describedby")!==undefined&&(downKeyAdvice.hide(),escKeyAdvice.show()),liHasFocus=!0);e.keyCode===27&&(parentListItem.find("ul:first, ul:first li").hide(),linkInFocus.attr("aria-describedby")!==undefined&&(escKeyAdvice.hide(),downKeyAdvice.show()))})}).blur(function(){if(liHasFocus)$(this).attr("aria-describedby")!==undefined&&(escKeyAdvice.hide(),downKeyAdvice.show());else{var itemParent=$(this).parent();primaryNav.css({zIndex:"0"});itemParent.removeClass("hasFocus hasFocusActive");primaryNav.find("ul li ul").css({zIndex:"0"});itemParent.removeClass("hasFocus");itemParent.find("ul").hide()}});primaryNav.find(".openSecondary").bind("click keydown",function(e){(e.type==="click"||e.type==="keydown"&&e.which===39)&&(e.preventDefault(),$(this).siblings("ul:first").css({zIndex:"500"}).show())}).focus(function(e){$(this).siblings("ul:first").hide()});primaryNav.find("ul li.secondaryMenu").next("li").find("a").focus(function(e){$(this).parent("li").prev("li").find("ul:first").hide()});primaryNav.find("ul li.secondaryMenu").prev("li").find("a").focus(function(e){$(this).parent("li").next("li").find("ul:first").hide()});primaryNav.find("ul ul a").focus(function(){var focusLink=$(this),focusLinkParents=focusLink.parents();focusLink.keydown(function(e){e.keyCode===27&&(focusLinkParents("ul:first").hide(),focusLinkParents("li:first").parents("li:first").find("a:first").focus())})});$("#user-content a[href]:first, #user-content select:first, #stage a[href]:first").focus(resetMenus);determineMegaMenuSize();$(window).resize(determineMegaMenuSize)}function handleCustomDropDown(){function showDropDown(){customDropDown.find("li ul").css({height:"auto",overflow:"visible",border:"1px solid #759ac7",paddingBottom:"14px",zIndex:"500"}).show();customDropDownFirst.addClass("hasFocus");liHasFocus=!0}function hideDropDown(){customDropDown.find("ul li ul").css({zIndex:"0"}).hide();customDropDownFirst.removeClass("hasFocus");liHasFocus=!1}var customDropDown=$("#custom-drop-down"),downKeyAdvice=$("#customDropDownKey"),escKeyAdvice=$("#customDropEscKey"),customDropDownFirst=customDropDown.find("ul li:eq(0)"),shiftPressed=!1;$(document).keydown(function(e){e.keyCode===16&&(shiftPressed=!0)}).keyup(function(e){e.keyCode===16&&(shiftPressed=!1)});customDropDownFirst.find("ul a").focus(function(){liHasFocus=!0}).blur(function(){liHasFocus=!1});customDropDownFirst.hover(function(e){showDropDown()},function(){setTimeout(hideDropDown,100)});customDropDownFirst.find("a:eq(0)").focus(function(){downKeyAdvice.show();escKeyAdvice.hide();hideDropDown()}).blur(function(){liHasFocus||hideDropDown()});customDropDown.find("ul ul li:last a").keydown(function(e){if(e.keyCode===9&&shiftPressed===!1&&(hideDropDown(),$.browser.msie)){var selectableItems=customDropDown.parents("#application").find("a[href],select,input[type!='hidden']"),index=selectableItems.index(this);if(index>-1&&index+1<selectableItems.length)return selectableItems.eq(index+1).focus(),!1}});customDropDown.keydown(function(e){if(e.keyCode===40||e.keyCode===13)return escKeyAdvice.show(),downKeyAdvice.hide(),showDropDown(),!1;e.keyCode===27&&(hideDropDown(),customDropDownFirst.find("a:eq(0)").focus())});customDropDown.find("li.custom-drop-down-top a:first").click(function(e){e.preventDefault()})}var liHasFocus,htmlToString;$("#user-content").roundCorners(["related-services","secondary-nav"]),function(){$(document).bind("cbox_complete",function(){for(var $cbox=$("#cboxContent"),focusables=["#cboxClose",":input",".btn-action",".btn-2nd-action","a"],$elements,firstFocusable,lastFocusable,shiftPressed,i=0;i<focusables.length;i++)if($elements=$cbox.find(focusables[i]).not(":hidden"),$elements.length>0){$elements.first().focus();break}firstFocusable=$cbox.find("a, input, select").not(":hidden").first();lastFocusable=$cbox.find("a, input, select").not(":hidden").last();lastFocusable.keydown(function(e){e.keyCode===9&&shiftPressed===!1&&(firstFocusable.focus(),e.preventDefault())});shiftPressed=!1;$(document).keydown(function(e){e.keyCode===16&&(shiftPressed=!0)}).keyup(function(e){e.keyCode===16&&(shiftPressed=!1)});firstFocusable.keydown(function(e){e.keyCode===9&&shiftPressed===!0&&(lastFocusable.focus(),e.preventDefault())})})}();$("a.btn-print").click(function(e){e.preventDefault();window.print()});$("#stage a.btn-2nd-action, #stage a.btn-action, #colorbox a.btn-2nd-action,  #colorbox a.btn-action").filter("[href='#']").click(function(e){e.preventDefault()});$("#stageInner a.btn-clk-disabled").block({overlayCSS:{opacity:0},message:null,fadeIn:0,fadeOut:0}).click(function(e){e.preventDefault()}),function(){var skipLinkList=$("#skipLinkList");skipLinkList.find("li:first").addClass("first");skipLinkList.find("li:last").addClass("last");skipLinkList.find("li a").each(function(){$(this).focus(function(){skipLinkList.addClass("skipNavShowing")}).blur(function(){skipLinkList.removeClass("skipNavShowing")}).click(function(){var currentLinkHref=$(this).attr("href"),skipTarget=$(currentLinkHref);skipTarget.attr("href",currentLinkHref);skipTarget.focus();skipLinkList.removeClass("skipNavShowing");skipTarget.attr("tabindex","-1")})})}();setupCustomTitles();liHasFocus=!1;setupCustomTooltips();handleFlyOutNav($("#adviceDownKey"),$("#adviceEscKey"));handleCustomDropDown(),function(defStr){defStr||(defStr=$("#txtSrch").val());$("#txtSrch").focus(function(){$(this).val()===defStr?$(this).val(""):$(this).select()})}(),function(){$("#nav-utility-links, #skipLinkList").attr("role","navigation");$("#search").attr("role","search");$("#maincontent").attr("role","main");$("#stage .page-msg").attr("role","alert")}(),function(){$("#primary-nav li ul").find("li:last").addClass("last");$("#stageUtilLinks li:last").addClass("last");var acTodyEls=$("table.ac-details>tbody");acTodyEls.find("tr.acAdditionalInfoBottom:last").addClass("last");acTodyEls.find("tr.account-row:gt(0)").addClass("non-first");$("#footer li:first").addClass("first");$("#footer li:last").addClass("last")}(),function(){if(!supportsCSSProperty("borderRadius")){var stage=$("#stage");$.each(["info-msg","error-msg","warning-msg","confirm-msg","major-confirm-msg","confirm-inner-box"],function(i,v){stage.find("."+v).append('<b class="'+v+'-ne"><\/b><b class="'+v+'-se"><\/b><b class="'+v+'-sw"><\/b><b class="'+v+'-nw"><\/b>')});$("#application div.user-notes").append('<b class="corner-se"><\/b><b class="corner-sw"><\/b>')}}();equaliseColHeights();$(window).resize(function(){equaliseColHeights()});$("#donor_bar").length>0&&$("h1").attr("aria-describedby","donor_bar");typeof externalPageDonerInfo!="undefined"&&externalPageDonerInfo.isDonor==="True"&&(!1||externalPageDonerInfo.greeting.trim())&&(htmlToString=document.createElement("DIV"),htmlToString.innerHTML=externalPageDonerInfo.greeting,document.title=document.title+" - "+(htmlToString.textContent||htmlToString.innerText||""))});
/*!
 * Copyright (c) Nationwide Building Society 2010. All rights reserved.
 */
$.support.hover=!0;$.bypassUnloadMsg=!1;handleBackButton();disableSubmitsOnClick("#stageInner a.btn-action,#log-out a.btn-action");$("#stageInner a.btn-action.btn-cancel").bind("click.disableSubmitsOnClick",function(){var clickedButton=this;setTimeout(function(){$(clickedButton).trigger("enableActionButton")},250)});String.prototype.startsWith=function(str){return this.indexOf(str)===0};$.clearChildrenWhenHidden=function(parents){$(parents).each(function(){var parent=$(this);parent.is(":hidden")&&parent.find("input").not(":button, :submit, :reset").val("").prop("checked",!1).prop("selected",!1)})};$.scrollToElement=function(selector,callback){if($(selector).length){var offset=$(selector).first().offset(),speed=400;$("html, body").animate({scrollTop:offset.top,scrollLeft:offset.left},{duration:speed,complete:callback})}};$.registerScrollViewedHandler=function(targetId,callbackFunction,accurancy){typeof accurancy=="undefined"&&(accurancy=6);contentViewStatus.addHandler(targetId,callbackFunction,accurancy)};contentViewStatus={handlers:[],accuracy:0,addHandler:function(targetId,callbackFunction,accurancy){this.accuracy=accurancy;this.handlers.push({target:targetId,callback:callbackFunction});this.bindViewStatus("#"+targetId)},bindViewStatus:function(selector){var local=this;$(selector).each(function(){local.updateViewState(this)});$(selector).scroll(function(event){local.updateViewState(event.target)})},dispatchViewedEvent:function(id){$.each(this.handlers,function(index,value){value.target==id&&value.callback&&value.callback(id)})},updateViewState:function(target){var local=this,scrollableArea=target,scrollableContent=$(target).children().first(),viewStatus=$(target).data("view");viewStatus||(viewStatus={topViewed:!1,bottomViewed:!1,allViewed:!1});var saTop=$(scrollableArea).offset().top,saBottom=saTop+$(scrollableArea).height(),scTop=$(scrollableContent).offset().top,scBottom=scTop+$(scrollableContent).height();viewStatus.topViewed||(viewStatus.topViewed=scTop>saTop-local.accuracy);viewStatus.bottomViewed||(viewStatus.bottomViewed=scBottom<saBottom+local.accuracy);viewStatus.allViewed||(viewStatus.allViewed=viewStatus.topViewed&&viewStatus.bottomViewed,viewStatus.allViewed&&target.id&&local.dispatchViewedEvent(target.id));$(target).data("view",viewStatus)}},function($){$.extend($.fn,{rules:function(command,argument){var element=this[0],filtered,data,param;if(command){var settings=$.data(element.form,"validator").settings,staticRules=settings.rules,existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":return argument?(filtered={},$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method]}),filtered):(delete staticRules[element.name],existingRules)}}return data=$.validator.normalizeRules($.extend({},$.validator.dataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element),data.validDate&&(param=data.validDate,delete data.validDate,data=$.extend({validDate:param},data)),data.regex&&(param=data.regex,delete data.regex,data=$.extend({regex:param},data)),data.required&&(param=data.required,delete data.required,data=$.extend({required:param},data)),data}})}(jQuery);
/*!
 * Copyright (c) Nationwide Building Society 2010. All rights reserved.
 */
$(function(){typeof pageHelp!="undefined"&&(pageHelp=$.extend({div:$("#page-help"),contentDiv:$("#page-help-html"),openLink:$("#page-help-link a"),closeLink:$("#page-help-close a"),cssUpdates:{stageUtilLinks:$("#stageUtilLinks")}},pageHelp||{}),pageHelp.openLink.bind("click",null,loadPageHelp),pageHelp.closeLink.bind("click",null,hidePageHelp))});$(function(){typeof helpSearchBox!="undefined"&&(helpSearchBox=$.extend({form:$(helpSearchBox.formSelector),button:$(helpSearchBox.buttonSelector)},helpSearchBox||{}),helpSearchBox.button.bind("click",null,loadHelpSearch))});$(function(){typeof externalPageHelp!="undefined"&&(externalPageHelp=$.extend({link:$("#external-page-help-link")},externalPageHelp||{}),externalPageHelp.link.bind("click",null,showExternalPageHelp))});
/*!
 * jQuery blockUI plugin
 * Version 2.70.0-2014.11.23
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 *
 *
 * Modifications:
 * - Applying IB-specific changes
 * - Applying jQuery migrate compatability implementation directly to get $.boxModel equivalent check.
 */
(function(){"use strict";function setup($){function install(el,opts){var css,themedCSS,full=el==window,msg=opts&&opts.message!==undefined?opts.message:undefined,node,data,z,lyr1,lyr2,lyr3,s,layers,$par,isBoxModel,expr,to;if(opts=$.extend({},$.blockUI.defaults,opts||{}),!opts.ignoreIfBlocked||!$(el).data("blockUI.isBlocked")){if(opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{}),css=$.extend({},$.blockUI.defaults.css,opts.css||{}),opts.onOverlayClick&&(opts.overlayCSS.cursor="pointer"),themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{}),msg=msg===undefined?opts.message:msg,full&&pageBlock&&remove(window,{fadeOut:0}),msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)&&(node=msg.jquery?msg[0]:msg,data={},$(el).data("blockUI.history",data),data.el=node,data.parent=node.parentNode,data.display=node.style.display,data.position=node.style.position,data.parent&&data.parent.removeChild(node)),$(el).data("blockUI.onUnblock",opts.onUnblock),z=opts.baseZ,lyr1=msie||opts.forceIframe?$('<iframe class="blockUI" tabindex="-1" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"><\/iframe>'):$('<div class="blockUI" style="display:none"><\/div>'),lyr2=opts.theme?$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+z+++';display:none"><\/div>'):$('<div class="blockUI blockOverlay" style="z-index:'+z+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"><\/div>'),opts.theme&&full?(s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">',opts.title&&(s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"<\/div>"),s+='<div class="ui-widget-content ui-dialog-content"><\/div>',s+="<\/div>"):opts.theme?(s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">',opts.title&&(s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||"&nbsp;")+"<\/div>"),s+='<div class="ui-widget-content ui-dialog-content"><\/div>',s+="<\/div>"):s=full?'<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"><\/div>':'<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"><\/div>',lyr3=$(s),msg&&(opts.theme?(lyr3.css(themedCSS),lyr3.addClass("ui-widget-content")):lyr3.css(css)),opts.theme||lyr2.css(opts.overlayCSS),lyr2.css("position",full?"fixed":"absolute"),(msie||opts.forceIframe)&&lyr1.css("opacity",0),layers=[lyr1,lyr2,lyr3],$par=full?$("body"):$(el),$.each(layers,function(){this.appendTo($par)}),opts.theme&&opts.draggable&&$.fn.draggable&&lyr3.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),isBoxModel=document.compatMode==="CSS1Compat",expr=setExpr&&(!isBoxModel||$("object,embed",full?null:el).length>0),ie6||expr){if(full&&opts.allowBodyStretch&&isBoxModel&&$("html,body").css("height","100%"),(ie6||!isBoxModel)&&!full)var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth"),fixT=t?"(0 - "+t+")":0,fixL=l?"(0 - "+l+")":0;$.each(layers,function(i,o){var s=o[0].style,top,expression;s.position="absolute";i<2?(full?s.setExpression("height",'Math.max(document.body.scrollHeight, document.body.offsetHeight) - (document.compatMode === "CSS1Compat"?0:'+opts.quirksmodeOffsetHack+') + "px"'):s.setExpression("height",'this.parentNode.offsetHeight + "px"'),full?s.setExpression("width",'document.compatMode === "CSS1Compat" && document.documentElement.clientWidth || document.body.clientWidth + "px"'):s.setExpression("width",'this.parentNode.offsetWidth + "px"'),fixL&&s.setExpression("left",fixL),fixT&&s.setExpression("top",fixT)):opts.centerY?(full&&s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),s.marginTop=0):!opts.centerY&&full&&(top=opts.css&&opts.css.top?parseInt(opts.css.top,10):0,expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"',s.setExpression("top",expression))})}if(msg&&(opts.theme?lyr3.find(".ui-widget-content").append(msg):lyr3.append(msg),(msg.jquery||msg.nodeType)&&$(msg).show()),(msie||opts.forceIframe)&&opts.showOverlay&&lyr1.show(),opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp,cb1=opts.showOverlay&&!msg?cb:noOp,cb2=msg?cb:noOp;opts.showOverlay&&lyr2._fadeIn(opts.fadeIn,cb1);msg&&lyr3._fadeIn(opts.fadeIn,cb2)}else opts.showOverlay&&lyr2.show(),msg&&lyr3.show(),opts.onBlock&&opts.onBlock.bind(lyr3)();bind(1,el,opts);full?(pageBlock=lyr3[0],pageBlockEls=$(opts.focusableElements,pageBlock),opts.focusInput&&setTimeout(focus,20)):center(lyr3[0],opts.centerX,opts.centerY);opts.timeout&&(to=setTimeout(function(){full?$.unblockUI(opts):$(el).unblock(opts)},opts.timeout),$(el).data("blockUI.timeout",to))}}function remove(el,opts){var count,full=el==window,$el=$(el),data=$el.data("blockUI.history"),to=$el.data("blockUI.timeout"),els;to&&(clearTimeout(to),$el.removeData("blockUI.timeout"));opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);opts.onUnblock===null&&(opts.onUnblock=$el.data("blockUI.onUnblock"),$el.removeData("blockUI.onUnblock"));els=full?$("body").children().filter(".blockUI").add("body > .blockUI"):$el.find(">.blockUI");opts.cursorReset&&(els.length>1&&(els[1].style.cursor=opts.cursorReset),els.length>2&&(els[2].style.cursor=opts.cursorReset));full&&(pageBlock=pageBlockEls=null);opts.fadeOut?(count=els.length,els.stop().fadeOut(opts.fadeOut,function(){--count==0&&reset(els,data,opts,el)})):reset(els,data,opts,el)}function reset(els,data,opts,el){var $el=$(el);if(!$el.data("blockUI.isBlocked")){if(els.each(function(i,o){this.parentNode&&this.parentNode.removeChild(this)}),data&&data.el&&(data.el.style.display=data.display,data.el.style.position=data.position,data.el.style.cursor="default",data.parent&&data.parent.appendChild(data.el),$el.removeData("blockUI.history")),$el.data("blockUI.static")&&$el.css("position","static"),typeof opts.onUnblock=="function")opts.onUnblock(el,opts);var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w);body[0].style.width=cssW}}function bind(b,el,opts){var full=el==window,$el=$(el),events;(b||(!full||pageBlock)&&(full||$el.data("blockUI.isBlocked")))&&($el.data("blockUI.isBlocked",b),full&&opts.bindEvents&&(!b||opts.showOverlay))&&(events="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",b?$(document).bind(events,opts,handler):$(document).unbind(events,handler))}function handler(e){var opts,target;if(e.type==="keydown"&&e.keyCode&&e.keyCode==9&&pageBlock&&e.data.constrainTabKey){var els=pageBlockEls,fwd=!e.shiftKey&&e.target===els[els.length-1],back=e.shiftKey&&e.target===els[0];if(fwd||back)return setTimeout(function(){focus(back)},10),!1}if(opts=e.data,target=$(e.target),target.hasClass("blockOverlay")&&opts.onOverlayClick)opts.onOverlayClick(e);return target.parents("div."+opts.blockMsgClass).length>0?!0:target.parents().children().filter("div.blockUI").length===0}function focus(back){if(pageBlockEls){var e=pageBlockEls[back===!0?pageBlockEls.length-1:0];e&&e.focus()}}function center(el,x,y){var p=el.parentNode,s=el.style,l=(p.offsetWidth-el.offsetWidth)/2-sz(p,"borderLeftWidth"),t=(p.offsetHeight-el.offsetHeight)/2-sz(p,"borderTopWidth");x&&(s.left=l>0?l+"px":"0");y&&(s.top=t>0?t+"px":"0")}function sz(el,p){return parseInt($.css(el,p),10)||0}var pageBlock,pageBlockEls;$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){},msie=/MSIE/.test(navigator.userAgent),ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),mode=document.documentMode||0,setExpr=$.isFunction(document.createElement("div").style.setExpression);$.blockUI=function(opts){install(window,opts)};$.unblockUI=function(opts){remove(window,opts)};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"><\/div>'),callBlock,nonmousedOpacity;title&&$m.append("<h1>"+title+"<\/h1>");message&&$m.append("<h2>"+message+"<\/h2>");timeout===undefined&&(timeout=3e3);callBlock=function(opts){opts=opts||{};$.blockUI({message:$m,fadeIn:typeof opts.fadeIn!="undefined"?opts.fadeIn:700,fadeOut:typeof opts.fadeOut!="undefined"?opts.fadeOut:1e3,timeout:typeof opts.timeout!="undefined"?opts.timeout:timeout,centerY:!1,showOverlay:!1,onUnblock:onClose,css:$.blockUI.defaults.growlCSS})};callBlock();nonmousedOpacity=$m.css("opacity");$m.mouseover(function(){callBlock({fadeIn:0,timeout:3e4});var displayBlock=$(".blockMsg");displayBlock.stop();displayBlock.fadeTo(300,1)}).mouseout(function(){$(".blockMsg").fadeOut(1e3)})};$.fn.block=function(opts){if(this[0]===window)return $.blockUI(opts),this;var fullOpts=$.extend({},$.blockUI.defaults,opts||{});return this.each(function(){var $el=$(this);fullOpts.ignoreIfBlocked&&$el.data("blockUI.isBlocked")||$el.unblock({fadeOut:0})}),this.each(function(){$.css(this,"position")=="static"&&(this.style.position="relative",$(this).data("blockUI.static",!0));this.style.zoom=1;install(this,opts)})};$.fn.unblock=function(opts){return this[0]===window?($.unblockUI(opts),this):this.each(function(){remove(this,opts)})};$.blockUI.version=2.7;$.blockUI.defaults={message:"<h1>Please wait...<\/h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};pageBlock=null;pageBlockEls=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],setup):setup(jQuery)})();foolproof=function(){};foolproof.is=function(value1,operator,value2,passOnNull){if(passOnNull){var isNullish=function(input){return input==null||input==undefined||input==""},value1nullish=isNullish(value1),value2nullish=isNullish(value2);if(value1nullish&&!value2nullish||value2nullish&&!value1nullish)return!0}var isNumeric=function(input){return+input==input&&input.length>0},isDate=function(input){var dateTest=new RegExp(/(?=\d)^(?:(?!(?:10\D(?:0?[5-9]|1[0-4])\D(?:1582))|(?:0?9\D(?:0?[3-9]|1[0-3])\D(?:1752)))((?:0?[13578]|1[02])|(?:0?[469]|11)(?!\/31)(?!-31)(?!\.31)|(?:0?2(?=.?(?:(?:29.(?!000[04]|(?:(?:1[^0-6]|[2468][^048]|[3579][^26])00))(?:(?:(?:\d\d)(?:[02468][048]|[13579][26])(?!\x20BC))|(?:00(?:42|3[0369]|2[147]|1[258]|09)\x20BC))))))|(?:0?2(?=.(?:(?:\d\D)|(?:[01]\d)|(?:2[0-8])))))([-.\/])(0?[1-9]|[12]\d|3[01])\2(?!0000)((?=(?:00(?:4[0-5]|[0-3]?\d)\x20BC)|(?:\d{4}(?!\x20BC)))\d{4}(?:\x20BC)?)(?:$|(?=\x20\d)\x20))?((?:(?:0?[1-9]|1[012])(?::[0-5]\d){0,2}(?:\x20[aApP][mM]))|(?:[01]\d|2[0-3])(?::[0-5]\d){1,2})?$/);return dateTest.test(input)},isBool=function(input){return input===!0||input===!1||typeof input=="string"&&(input.toLowerCase()==="true"||input.toLowerCase()==="false")};isDate(value1)?(value1=Date.parse(value1),value2=Date.parse(value2)):isBool(value1)?(typeof value1=="string"&&value1.toLowerCase()=="false"&&(value1=!1),typeof value2=="string"&&value2.toLowerCase()=="false"&&(value2=!1),value1=!!value1,value2=!!value2):isNumeric(value1)&&(value1=parseFloat(value1),value2=parseFloat(value2));switch(operator){case"EqualTo":if(value1==value2)return!0;break;case"NotEqualTo":if(value1!=value2)return!0;break;case"GreaterThan":if(value1>value2)return!0;break;case"LessThan":if(value1<value2)return!0;break;case"GreaterThanOrEqualTo":if(value1>=value2)return!0;break;case"LessThanOrEqualTo":if(value1<=value2)return!0;break;case"RegExMatch":return new RegExp(value2).test(value1);break;case"NotRegExMatch":return!new RegExp(value2).test(value1);break}return!1};foolproof.getId=function(element,dependentPropety){var pos=element.id.lastIndexOf("_")+1;return element.id.substr(0,pos)+dependentPropety.replace(/\./g,"_")};foolproof.getName=function(element,dependentPropety){var pos=element.name.lastIndexOf(".")+1;return element.name.substr(0,pos)+dependentPropety},function(){jQuery.validator.addMethod("is",function(value,element,params){var dependentProperty=foolproof.getId(element,params.dependentproperty),operator=params.operator,passOnNull=params.passonnull,dependentValue=document.getElementById(dependentProperty).value;return foolproof.is(value,operator,dependentValue,passOnNull)?!0:!1});jQuery.validator.addMethod("requiredif",function(value,element,params){var dependentProperty=foolproof.getName(element,params.dependentproperty),dependentTestValue=params.dependentvalue,operator=params.operator,pattern=params.pattern,dependentPropertyElement=document.getElementsByName(dependentProperty),dependentValue=null,index;if(dependentPropertyElement.length>1){for(index=0;index!=dependentPropertyElement.length;index++)if(dependentPropertyElement[index].checked){dependentValue=dependentPropertyElement[index].value;break}dependentValue==null&&(dependentValue=!1)}else dependentValue=dependentPropertyElement[0].value;if(foolproof.is(dependentValue,operator,dependentTestValue))if(pattern==null){if(value!=null&&value.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!="")return!0}else return new RegExp(pattern).test(value);else return!0;return!1});jQuery.validator.addMethod("requiredifempty",function(value,element,params){var dependentProperty=foolproof.getId(element,params.dependentproperty),dependentValue=document.getElementById(dependentProperty).value;if(dependentValue==null||dependentValue.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")==""){if(value!=null&&value.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!="")return!0}else return!0;return!1});jQuery.validator.addMethod("requiredifnotempty",function(value,element,params){var dependentProperty=foolproof.getId(element,params.dependentproperty),dependentValue=document.getElementById(dependentProperty).value;if(dependentValue!=null&&dependentValue.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!=""){if(value!=null&&value.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!="")return!0}else return!0;return!1});var setValidationValues=function(options,ruleName,value){options.rules[ruleName]=value;options.message&&(options.messages[ruleName]=options.message)},$Unob=$.validator.unobtrusive;$Unob.adapters.add("requiredif",["dependentproperty","dependentvalue","operator","pattern"],function(options){var value={dependentproperty:options.params.dependentproperty,dependentvalue:options.params.dependentvalue,operator:options.params.operator,pattern:options.params.pattern};setValidationValues(options,"requiredif",value)});$Unob.adapters.add("is",["dependentproperty","operator","passonnull"],function(options){setValidationValues(options,"is",{dependentproperty:options.params.dependentproperty,operator:options.params.operator,passonnull:options.params.passonnull})});$Unob.adapters.add("requiredifempty",["dependentproperty"],function(options){setValidationValues(options,"requiredifempty",{dependentproperty:options.params.dependentproperty})});$Unob.adapters.add("requiredifnotempty",["dependentproperty"],function(options){setValidationValues(options,"requiredifnotempty",{dependentproperty:options.params.dependentproperty})})}();
/*!
 * Copyright (c) Nationwide Building Society 2010. All rights reserved.
 */
(function($){var propertyCache={};$.supportsCSSProperty=function(prop){var memoize=function(){for(var uc_prop=prop.charAt(0).toUpperCase()+prop.substr(1),props=[prop,"webkit"+uc_prop,"Moz"+uc_prop,"moz"+uc_prop,"o"+uc_prop,"ms"+uc_prop],i=props.length,value=!1,style=document.createElement("div").style;i--;)if(style[props[i]]!==undefined){value=!0;break}return propertyCache[prop]=value};return propertyCache[prop]!=undefined?propertyCache[prop]:memoize.apply(this)};$.fn.roundCorners=function(options){function DefaultOption(){this.childSelector="";this.prefix="";this.suffixes=[]}function cornerHtml(prefix,suffixes){var i=0,arr=[],len=suffixes.length;for(i;i<len;i++)arr.push('<b class="'+prefix+suffixes[i]+'"><\/b>');return arr.join("")}function getDefaultSetup(option){return $.extend(new DefaultOption,defaultSetups[option]||{})}function getDefaultSuffixes(suffixes){return defaultCorners[suffixes]||[]}function isString(obj){return typeof obj=="string"}if($.supportsCSSProperty("borderRadius")||typeof document.body.style.maxHeight=="undefined")return this;var se="se",sw="sw",ne="ne",nw="nw",defaultCorners={all:[ne,se,sw,nw],bottom:[se,sw],top:[ne,nw],left:[sw,nw],right:[se,ne]},defaultSetups={"back-nav":{childSelector:".back-nav",prefix:"back-nav-",suffixes:defaultCorners.bottom},"bg-box-ff":{childSelector:".bg-box-ff",prefix:"bg-box-",suffixes:["ne-ff","se-ff","sw-ff","nw-ff"]},"bg-box-f7":{childSelector:".bg-box-f7",prefix:"bg-box-",suffixes:["ne-f7","se-f7","sw-f7","nw-f7"]},"bg-box-f7nofloat":{childSelector:".bg-box-f7nofloat",prefix:"bg-box-",suffixes:["ne-f7","se-f7","sw-f7","nw-f7"]},calendar:{prefix:"cal-legend-",suffixes:defaultCorners.top},"comm-rounded-box":{childSelector:"div.comm-rounded-box, div.admin-comm-rounded-box",prefix:"comm-box-",suffixes:defaultCorners.all},"comm-help-box":{childSelector:"div.comm-onboarding-help",prefix:"comm-box-help-",suffixes:defaultCorners.all},"confirm-inner-box":{childSelector:".confirm-inner-box",prefix:"confirm-inner-box-",suffixes:defaultCorners.all},"confirm-msg":{childSelector:".confirm-msg",prefix:"confirm-msg-",suffixes:defaultCorners.all},"content-pod":{childSelector:".content-pod, .form-pod",prefix:"c-pod-",suffixes:defaultCorners.all},"error-msg":{childSelector:".error-msg",prefix:"error-msg-",suffixes:defaultCorners.all},"full-blue-container":{childSelector:".full-blue-container",prefix:"blue-pod-",suffixes:defaultCorners.all},"info-msg":{childSelector:".info-msg",prefix:"info-msg-",suffixes:defaultCorners.all},"information-box":{childSelector:".information-box",prefix:"information-box-",suffixes:defaultCorners.all},"inner-box":{childSelector:".inner-box",prefix:"inner-box-",suffixes:defaultCorners.all},"inner-box-border":{childSelector:".inner-box-border",prefix:"inner-box-border-",suffixes:defaultCorners.all},"inner-box-border-sm-fff":{childSelector:".inner-box-border-sm-fff",prefix:"inner-sm-fff-pod-",suffixes:defaultCorners.all},"major-confirm-msg":{childSelector:".major-confirm-msg",prefix:"major-confirm-msg-",suffixes:defaultCorners.all},"next-logical-step":{childSelector:"div.next-logical-step",prefix:"next-logical-step-",suffixes:defaultCorners.left},"outer-details":{childSelector:"div.outer-details",prefix:"outer-",suffixes:defaultCorners.all},"quick-transfer":{childSelector:"div.quick-transfer",prefix:"qt-",suffixes:defaultCorners.bottom},"related-services":{childSelector:".related-services",prefix:"rs-",suffixes:defaultCorners.all},"secondary-nav":{childSelector:".secondary-nav",prefix:"secondary-nav-",suffixes:defaultCorners.left},"sales-pod":{childSelector:"div.sales-two-col-pod, div.sales-form-pod, div.message-form-pod",prefix:"sales-two-pod-",suffixes:defaultCorners.all},"sales-pod-inner":{childSelector:"div.sales-form-pod-inner-rounded, div.message-form-pod-inner-rounded",prefix:"sales-inner-pod-",suffixes:defaultCorners.all},"split-bottom-content-pod":{childSelector:".split-bottom-content-pod",prefix:"c-pod-",suffixes:defaultCorners.bottom},"split-top-blue-content-pod":{childSelector:".split-top-blue-content-pod",prefix:"blue-pod-",suffixes:defaultCorners.top},"tech-error":{childSelector:".tech-error-msg",prefix:"tech-err-pod-",suffixes:defaultCorners.all},"system-error":{childSelector:".system-error-message-pod",prefix:"sys-err-pod-",suffixes:defaultCorners.all},"terms-conditions-container":{childSelector:".terms-conditions-container",prefix:"terms-conditions-",suffixes:defaultCorners.all},"warning-msg":{childSelector:".warning-msg",prefix:"warning-msg-",suffixes:defaultCorners.all},"wiz-pod":{childSelector:"div.wiz-pod",prefix:"wiz-",suffixes:defaultCorners.top},"wiz-pod-end":{childSelector:"div.wiz-pod-end",prefix:"wiz-",suffixes:defaultCorners.bottom}};if($.isArray(options)){var i=0,j,len=options.length,option=new DefaultOption;for(i;i<len;i++)isString(options[i])?options[i]=getDefaultSetup(options[i]):(options[i].suffixes=isString(options[i].suffixes)?getDefaultSuffixes(options[i].suffixes):options[i].suffixes,options[i]=$.extend(option,options[i]));return j=i,this.each(function(){for(i=j;i--;)options[i].childSelector?$(this).find(options[i].childSelector).append(cornerHtml(options[i].prefix,options[i].suffixes)):$(this).append(cornerHtml(options[i].prefix,options[i].suffixes))})}else return isString(options)?options=getDefaultSetup(options):(options.suffixes=isString(options.suffixes)?getDefaultSuffixes(options.suffixes):options.suffixes,options=$.extend(new DefaultOption,options||{})),this.each(function(){options.childSelector?$(this).find(options.childSelector).append(cornerHtml(options.prefix,options.suffixes)):$(this).append(cornerHtml(options.prefix,options.suffixes))})}})(jQuery);
/*!
* Copyright (c) Nationwide Building Society 2010. All rights reserved.
*/
(function($){function validatorvalidif(operator,value,element,parameters){var ifValue=parameters.ifvalue,ifValueType=parameters.ifvaluetype,isValid=!0;return ifValue=customValidatorGetStronglyTypedValue(ifValue,ifValueType),value=customValidatorGetStronglyTypedValue(value,ifValueType),ifValue!=null&&value!=null&&value!=NaN&&(isValid=customValidatorCompare(value,operator,ifValue)),isValid}function validatorvalidifwhere(operator,value,element,parameters){var wherePropertyId="#"+parameters.whereproperty,whereValue=parameters.wherevalue,whereValueType=parameters.wherevaluetype,whereOperator=parseInt(parameters.whereoperator,10),whereActual=$(wherePropertyId).val(),isValid=!0,ifValue,ifValueType;return whereActual=customValidatorGetStronglyTypedValue(whereActual,whereValueType),whereValue=customValidatorGetStronglyTypedValue(whereValue,whereValueType),whereActual!=null&&customValidatorCompare(whereActual,whereOperator,whereValue)&&(ifValue=parameters.ifvalue,ifValueType=parameters.ifvaluetype,ifValue=customValidatorGetStronglyTypedValue(ifValue,ifValueType),value=customValidatorGetStronglyTypedValue(value,ifValueType),value!=null&&ifValue!=null&&(isValid=customValidatorCompare(value,operator,ifValue))),isValid}function validatorvalidifproperty(operator,value,element,parameters){var depPropertyId="#"+parameters.dependentproperty,depValueType=parameters.dependentpropertytype,depValue=$(depPropertyId).val(),isValid=!0;return operator!="9"&&(depValue=customValidatorGetStronglyTypedValue(depValue,depValueType),value=customValidatorGetStronglyTypedValue(value,depValueType)),depValue!=null&&value!=null&&(isValid=customValidatorCompare(value,operator,depValue)),isValid}function validatorvalidifpropertywhere(operator,value,element,parameters){var wherePropertyId="#"+parameters.whereproperty,whereValue=parameters.wherevalue,whereValueType=parameters.wherevaluetype,whereActual=$(wherePropertyId).val(),isValid=!0;if(whereActual=customValidatorGetStronglyTypedValue(whereActual,whereValueType),whereValue=customValidatorGetStronglyTypedValue(whereValue,whereValueType),whereActual!=null&&customValidatorCompare(whereActual,operator,whereValue)){var depOperator=parseInt(parameters.dependentoperator,10),depPropertyId="#"+parameters.dependentproperty,depPropertyType=parameters.dependentpropertytype,depValue=$(depPropertyId).val();depValue=customValidatorGetStronglyTypedValue(depValue,depPropertyType);value=customValidatorGetStronglyTypedValue(value,depPropertyType);depValue!=null&&value!=null&&(isValid=customValidatorCompare(value,depOperator,depValue))}return isValid}function customValidatorCompare(value,operator,checkValue){switch(operator){case 0:return value==checkValue;case 1:return value!=checkValue;case 2:return value>checkValue;case 3:return value>=checkValue;case 4:return value<checkValue;case 5:return value<=checkValue;case 6:return value.startsWith(checkValue);case 7:return!value.startsWith(checkValue);case 8:return value.toLowerCase()!=checkValue.toLowerCase();case 9:return checkValue.indexOf(value)>=0}return!1}function customValidatorGetStronglyTypedValue(value,typeString){return result=null,(typeString=="datetime"||typeString=="System.DateTime"||typeString=="System.Nullable`1[System.DateTime]")&&(result=customValidatorParseDate(value)),(typeString=="boolean"||typeString=="System.Boolean")&&(result=customValidatorParseBoolean(value)),(typeString=="System.Int32"||typeString=="System.Int16")&&(result=parseInt(value,10)),(typeString=="number"||typeString=="System.Decimal"||typeString=="System.Double")&&(result=parseFloat(value)),typeString=="System.Nullable`1[System.Decimal]"&&value!=null&&value!=""&&(result=parseFloat(value)),result=typeString=="System.String"?value:isNaN(result)?null:result}function customValidatorParseDate(dateString){var date=null,regex=/^(\d{2})\/(\d{2})\/(\d{4})$/,match=regex.exec(dateString.substring(0,10));return match&&(date=new Date(match[3],match[2]-1,match[1])),date}function customValidatorParseBoolean(boolString){if(boolString!=null)switch(boolString.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}}function isSequence(str,difference){for(var seq=!0,i=0;i<str.length;i++){if(i+1==str.length)break;if(str.charCodeAt(i)+difference!==str.charCodeAt(i+1)){seq=!1;break}}return seq}function validateDay(value,dateRegex){var result=!1,passedRegex=!0,match;if(dateRegex!=null&&dateRegex!=""&&(match=dateRegex.exec(value),passedRegex=match),passedRegex){var dateArray=value.split("/"),day=dateArray[0],month=dateArray[1],year=dateArray[2];result=day>0&&day<=getDaysInMonth(month,year)}return result}function getDaysInMonth(month,year){return[31,isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][parseInt(month,10)-1]}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}function addValidationMethod(methodName,params,fn){$.validator.unobtrusive.adapters.add(methodName,params,function(options){options.rules[methodName]=options.params;options.messages[methodName]=options.message});$.validator.addMethod(methodName,fn)}var validIfParams,validIfWhereParams,validIfPropertyParams,validIfPropertyWhereParams;addValidationMethod("stringlengthornull",["maximumlength","minimumlength","noisecharacters"],function(value,element,parameters){var isValid=!0;if(value!=null){var max=parameters.maximumlength,min=parameters.minimumlength,noisechars=parameters.noisecharacters,len=value.length;noisechars.indexOf("\n")>-1;value=value.replace(/[\n]+/g,"");len=value.length;noisechars.indexOf("\r")>-1;value=value.replace(/[\r]+/g,"");len=value.length;noisechars.indexOf("\t")>-1;value=value.replace(/[\t]+/g,"");len=value.length;isValid=len>=min&&len<=max}return isValid});addValidationMethod("notsequence",[],function(value,element,params){return this.optional(element)?!0:!(isSequence(value,0)||isSequence(value,1)||isSequence(value,-1))});addValidationMethod("memorabledate",["dateregex"],function(value,element,params){var isValid,result,regex;if(this.optional(element))return!0;if(value.length!=8)return!1;if(isValid=!1,result=!1,params.dateregex!=null&&params.dateregex!=""&&(regex=RegExp(params.dateregex),isValid=regex.exec(value)),isValid){var day=value.substr(0,2),month=value.substr(2,2),year=value.substr(4,4);result=day>0&&day<=getDaysInMonth(month,year)}return result});addValidationMethod("validdate",["dateregex"],function(value,element,params){var isValid=!0,regex=params.dateregex;return regex!=null&&regex!=""&&(regex=RegExp(params.dateregex)),value!=null&&value!=""&&(isValid=validateDay(value,regex)),isValid});addValidationMethod("paymentscharacters",["paymentssequenceregex","paymentscharactersregex"],function(value,element,params){var isValid=!0,matchedSequence=null,matchedCharacters=null,regexSequence=params.paymentssequenceregex,regexCharacters=params.paymentscharactersregex;return regexSequence!=null&&regexCharacters!=null&&regexSequence!=""&&regexCharacters!=""&&(regexSequence=RegExp(params.paymentssequenceregex),regexCharacters=RegExp(params.paymentscharactersregex),value!=null&&value!=""&&(matchedSequence=regexSequence.exec(value),matchedCharacters=regexCharacters.exec(value),(matchedSequence===null||matchedCharacters===null)&&(isValid=!1))),isValid});addValidationMethod("is",["dependentproperty","operator","passonnull"],function(value,element,params){var dependentProperty=foolproof.getId(element,params.dependentproperty),operator=params.operator,dependentValue=null;if(dependentProperty!=null&&document.getElementById(dependentProperty)!=null)dependentValue=document.getElementById(dependentProperty).value;else return!0;return foolproof.is(value,operator,dependentValue)?!0:!1});$.validator.methods.required=function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case"select":var val=$(element).val();return val&&+val!=-1&&val.length>0;case"input":if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0}};validIfParams=["ifvalue","ifvaluetype"];addValidationMethod("validifequals",validIfParams,function(value,element,parameters){return validatorvalidif(0,value,element,parameters)});addValidationMethod("validifnotequals",validIfParams,function(value,element,parameters){return validatorvalidif(1,value,element,parameters)});addValidationMethod("validifgreaterthan",validIfParams,function(value,element,parameters){return validatorvalidif(2,value,element,parameters)});addValidationMethod("validifgreaterthanorequals",validIfParams,function(value,element,parameters){return validatorvalidif(3,value,element,parameters)});addValidationMethod("validiflessthan",validIfParams,function(value,element,parameters){return validatorvalidif(4,value,element,parameters)});addValidationMethod("validiflessthanorequals",validIfParams,function(value,element,parameters){return validatorvalidif(5,value,element,parameters)});addValidationMethod("validifstartswith",validIfParams,function(value,element,parameters){return validatorvalidif(6,value,element,parameters)});addValidationMethod("validifnotstartswith",validIfParams,function(value,element,parameters){return validatorvalidif(7,value,element,parameters)});validIfWhereParams=["ifvalue","ifvaluetype","whereproperty","whereoperator","wherevalue","wherevaluetype"];addValidationMethod("validifwhereequals",validIfWhereParams,function(value,element,parameters){return validatorvalidifwhere(0,value,element,parameters)});addValidationMethod("validifwherenotequals",validIfWhereParams,function(value,element,parameters){return validatorvalidifwhere(1,value,element,parameters)});addValidationMethod("validifwheregreaterthan",validIfWhereParams,function(value,element,parameters){return validatorvalidifwhere(2,value,element,parameters)});addValidationMethod("validifwheregreaterthanorequals",validIfWhereParams,function(value,element,parameters){return validatorvalidifwhere(3,value,element,parameters)});addValidationMethod("validifwherelessthan",validIfWhereParams,function(value,element,parameters){return validatorvalidifwhere(4,value,element,parameters)});addValidationMethod("validifwherelessthanorequals",validIfWhereParams,function(value,element,parameters){return validatorvalidifwhere(5,value,element,parameters)});validIfPropertyParams=["dependentproperty","dependentpropertytype"];addValidationMethod("validifpropertyequals",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(0,value,element,parameters)});addValidationMethod("validifpropertynotequals",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(1,value,element,parameters)});addValidationMethod("validifpropertygreaterthan",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(2,value,element,parameters)});addValidationMethod("validifpropertygreaterthanorequals",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(3,value,element,parameters)});addValidationMethod("validifpropertylessthan",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(4,value,element,parameters)});addValidationMethod("validifpropertylessthanorequals",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(5,value,element,parameters)});addValidationMethod("validifpropertystartswith",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(6,value,element,parameters)});addValidationMethod("validifpropertynotstartswith",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(7,value,element,parameters)});addValidationMethod("validifpropertystringsnotequalignorecase",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(8,value,element,parameters)});addValidationMethod("validifpropertycontainsdate",validIfPropertyParams,function(value,element,parameters){return validatorvalidifproperty(9,value,element,parameters)});addValidationMethod("validifpropertymultipleof",validIfPropertyParams,function(value,element,parameters){var depPropertyId="#"+parameters.dependentproperty,depPropertyType=parameters.dependentpropertytype,depValue=$(depPropertyId).val();return depValue=customValidatorGetStronglyTypedValue(depValue,depPropertyType),value=customValidatorGetStronglyTypedValue(value,depPropertyType),value%depValue==0});validIfPropertyWhereParams=["dependentoperator","dependentproperty","dependentpropertytype","whereproperty","wherevalue","wherevaluetype"];addValidationMethod("validifpropertywhereequals",validIfPropertyWhereParams,function(value,element,parameters){return validatorvalidifpropertywhere(0,value,element,parameters)});addValidationMethod("validifpropertywherenotequals",validIfPropertyWhereParams,function(value,element,parameters){return validatorvalidifpropertywhere(1,value,element,parameters)});addValidationMethod("validifpropertywheregreaterthan",validIfPropertyWhereParams,function(value,element,parameters){return validatorvalidifpropertywhere(2,value,element,parameters)});addValidationMethod("validifpropertywheregreaterthanorequals",validIfPropertyWhereParams,function(value,element,parameters){return validatorvalidifpropertywhere(3,value,element,parameters)});addValidationMethod("validifpropertywherelessthan",validIfPropertyWhereParams,function(value,element,parameters){return validatorvalidifpropertywhere(4,value,element,parameters)});addValidationMethod("validifpropertywherelessthanorequals",validIfPropertyWhereParams,function(value,element,parameters){return validatorvalidifpropertywhere(5,value,element,parameters)});addValidationMethod("booleanrequiredtobetrue",[],function(value,element,parameters){var $element=$(element),isValueTrue=typeof value!="undefined"&&value.toLowerCase()==="true",isHidden=$element.is(":hidden"),isChecked=$element.is("[type=checkbox]")&&$element.is(":checked");return isValueTrue&&(isHidden||isChecked)})})(jQuery);
/*!
Copyright (c) Nationwide Building Society 2016. All rights reserved.
*/
(function($){function customHighlight(element){var element=$(element),$match;element.data("val")&&($match=element.closest(".form-table-row"),$match.length>0?$match.addClass("row-error"):($match=element.closest("div.bg-box-ff"),$match.length>0?$match.addClass("bg-box-error-ff"):($match=element.closest("div.com-highlight"),$match.length>0?($match.addClass("not-valid").removeClass("is-valid"),element.closest("div.sales-two-col-pod-row").addClass("pod-row-error"),$match.hasClass("com-group-highlight")&&$match.siblings().addClass("not-valid").removeClass("is-valid")):(element.closest(".terms-conditions-container").addClass("terms-conditions-error"),$.supportsCSSProperty("borderRadius")||(element.siblings("b").remove(),$("#stage").roundCorners([" terms-conditions-error"]))))),this.settings!==undefined&&this.settings.highlightExtension!==undefined&&this.settings.highlightExtension&&this.settings.highlightExtension.call(element))}$.validator.setDefaults({errorContainer:$("#validationSummaryId"),ignore:null,showErrors:function(){this.defaultShowErrors();$(window).resize()},highlight:function(element,errorClass,validClass){customHighlight.call(this,element)},unhighlight:function(element,errorClass,validClass){var element=$(element),$match,$siblings;element.data("val")&&($match=element.closest(".form-table-row"),$match.length>0?$match.find("*").hasClass("field-validation-error")||$match.removeClass("row-error"):($match=element.closest("div.bg-box-ff"),$match.length>0?$match.removeClass("bg-box-error-ff"):($match=element.closest("div.com-highlight"),$match.length>0?($siblings=$match.siblings(),$match.hasClass("com-group-highlight")?$siblings.find("input,select").not(":button, :submit, :reset").hasClass("input-validation-error")||($match.removeClass("not-valid").addClass("is-valid"),$siblings.removeClass("not-valid").addClass("is-valid")):$match.removeClass("not-valid").addClass("is-valid"),$siblings.hasClass("not-valid")||element.parents("div.sales-two-col-pod-row:first").removeClass("pod-row-error")):(element.closest(".terms-conditions-container").removeClass("terms-conditions-error"),$.supportsCSSProperty("borderRadius")||(element.siblings("b").remove(),$("#stage").roundCorners(["terms-conditions-error"]))))),this.settings.unhighlightExtension&&this.settings.unhighlightExtension.call(element))}});$("input,select").filter("[data-val='true']").filter(".input-validation-error").each(function(){customHighlight(this)});$(function(){var pageForms=$("form");pageForms.unbind("invalid-form.validate");pageForms.bind("invalid-form.validate",function(){$(".btn-clk-disabled").trigger("enableActionButton");$("#validationSummaryId").addClass("validation-summary-errors").removeClass("validation-summary-valid")})})})(jQuery)